# ğŸš¨ V30 ì¹˜ëª…ì  ì˜¤ë¥˜ ìˆ˜ì • ì™„ë£Œ - ì¸ê³„ ë¬¸ì„œ

**ì‘ì„±ì¼**: 2026-01-18
**ì‘ì„±ì**: Claude Code Session 1
**ê¸´ê¸‰ë„**: âš ï¸ **CRITICAL**
**ë‹¤ìŒ ë‹´ë‹¹ì**: Claude Code Session 2

---

## ğŸ“‹ ìš”ì•½

**ë¬¸ì œ**: V30 ì‹œìŠ¤í…œì—ì„œ `sentiment='neutral'` (ì¤‘ë¦½) vs `sentiment='free'` (ììœ  ìˆ˜ì§‘) í˜¼ë™
**ì›ì¸**: `topic_mode='free'`ë¥¼ DBì— `'neutral'`ë¡œ ì˜ëª» ë§¤í•‘
**ê²°ê³¼**: ëª¨ë“  ì¹´í…Œê³ ë¦¬ ì ìˆ˜ê°€ 70-77ì ìœ¼ë¡œ ë¹„ìŠ·í•¨ (ë‹¤ì–‘ì„± ì†Œì‹¤)
**í•´ê²°**: DB ìŠ¤í‚¤ë§ˆ + ì½”ë“œ ìˆ˜ì • ì™„ë£Œ, ì¡°ì€í¬ ë°ì´í„° ì¬ìˆ˜ì§‘ ì¤‘

---

## ğŸ”´ ë¬¸ì œ ìƒì„¸

### 1. ì›ë˜ ì˜ë„ (ì˜¬ë°”ë¦„)

```
20% negative + 20% positive + 60% free
```

- **free** = ììœ ë¡­ê²Œ ìˆ˜ì§‘ (ê¸ì •/ë¶€ì •/ì¤‘ë¦½ ëª¨ë‘ ëœë¤)
- ëª©ì : ë‹¤ì–‘í•œ sentiment í™•ë³´

### 2. ì‹¤ì œ ë™ì‘ (ì˜ëª»ë¨)

```python
# collect_v30.py:78 (ìˆ˜ì • ì „)
'free': 'neutral'  # âŒ ì˜ëª»ëœ ë§¤í•‘!
```

- **ê²°ê³¼**: 60%ë¥¼ "ì¤‘ë¦½ë§Œ" ìˆ˜ì§‘
- **ì˜í–¥**: ê¸ì •/ë¶€ì • ë°ì´í„° ë¶€ì¡± â†’ ëª¨ë“  ì ìˆ˜ ë¹„ìŠ·

### 3. ì¡°ì€í¬ ì ìˆ˜ ë¶„ì„ (ì˜ëª»ëœ ê²°ê³¼)

```
ê³µìµì„±:    77ì  (+3.48)
ì „ë¬¸ì„±:    76ì  (+3.22)
ë¦¬ë”ì‹­:    76ì  (+3.25)
ëŒ€ì‘ì„±:    76ì  (+3.30)
ë¹„ì „:      75ì  (+3.00)
ì±…ì„ê°:    75ì  (+3.09)
ì†Œí†µëŠ¥ë ¥:  73ì  (+2.51)
ì²­ë ´ì„±:    72ì  (+2.37)
ìœ¤ë¦¬ì„±:    71ì  (+2.18)
íˆ¬ëª…ì„±:    70ì  (+1.94)
```

**ë¬¸ì œì **:
- 10ê°œ ì¹´í…Œê³ ë¦¬ê°€ 70-77ì  ë²”ìœ„ (7ì  ì°¨ì´)
- ë„ˆë¬´ ê· ì¼í•¨ â†’ ë‹¤ì–‘ì„± ì—†ìŒ
- ì‹¤ì œë¡œëŠ” ë” í° ì°¨ì´ê°€ ìˆì–´ì•¼ í•¨

---

## âœ… ìˆ˜ì • ì™„ë£Œ ë‚´ì—­

### 1. DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì • âœ…

**íŒŒì¼**: `migrations/add_free_sentiment.sql`

```sql
ALTER TABLE collected_data_v30
DROP CONSTRAINT IF EXISTS collected_data_v30_sentiment_check;

ALTER TABLE collected_data_v30
ADD CONSTRAINT collected_data_v30_sentiment_check
CHECK (sentiment IN ('positive', 'negative', 'neutral', 'free'));
```

**ì‹¤í–‰ ê²°ê³¼**: âœ… ì„±ê³µ (`sentiment='free'` ê°’ ì €ì¥ ê°€ëŠ¥)

### 2. collect_v30.py ìˆ˜ì • âœ… (2ê°œì†Œ)

**íŒŒì¼**: `0-3_AI_Evaluation_Engine/ì„¤ê³„ë¬¸ì„œ_V7.0/ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸/collect_v30.py`

**âš ï¸ ì¤‘ìš”: 2ê°œì˜ ë§¤í•‘ ì§€ì ì„ ëª¨ë‘ ìˆ˜ì •í•´ì•¼ í•¨!**

#### ìˆ˜ì • 1: topic_mode_to_sentiment í•¨ìˆ˜ (78-80ë²ˆ ì¤„)
```python
# ìˆ˜ì • ì „
'free': 'neutral'  # âŒ

# ìˆ˜ì • í›„
'free': 'free'  # âœ…
```

#### ìˆ˜ì • 2: DB ì €ì¥ ì§ì „ ë§¤í•‘ ì œê±° (1235-1238ë²ˆ ì¤„)
```python
# ìˆ˜ì • ì „
sentiment = item.get('sentiment') or 'neutral'
# Map 'free' to 'neutral' for DB compatibility
if sentiment == 'free':
    sentiment = 'neutral'  # âŒ ì´ê²Œ ì§„ì§œ ë¬¸ì œì˜€ìŒ!

# ìˆ˜ì • í›„
sentiment = item.get('sentiment') or 'free'
# âœ… 'free' ê°’ ê·¸ëŒ€ë¡œ ìœ ì§€ (DBì—ì„œ í—ˆìš©ë¨)
```

**ê²€ì¦ ì™„ë£Œ**:
- âœ… ìˆ˜ì§‘ëœ ë°ì´í„°ì—ì„œ `sentiment='free'` ê°’ í™•ì¸ë¨
- âœ… ë¹„ìœ¨: negative 20%, positive 20%, free 60%

### 3. ê¸°ì¡´ ë°ì´í„° ì‚­ì œ âœ…

```python
politician_id = 'd0a5d6e1'  # ì¡°ì€í¬
```

- collected_data_v30: 996ê°œ ì‚­ì œ âœ…
- ai_evaluations_v28: 2,760ê°œ ì‚­ì œ âœ…

### 4. ì¬ìˆ˜ì§‘ ì‹¤í–‰ ì¤‘ â³

**ì‹¤í–‰ ëª…ë ¹**:
```bash
python collect_v30.py --politician_id=d0a5d6e1 --politician_name="ì¡°ì€í¬" --parallel
```

**ë°±ê·¸ë¼ìš´ë“œ Task ID**: `bb7020e`
**ì§„í–‰ ìƒí™©**: ì‹¤í–‰ ì¤‘

---

## ğŸ“ ë‹¤ìŒ ë‹´ë‹¹ì í•  ì¼

### 1. ì¬ìˆ˜ì§‘ ì™„ë£Œ í™•ì¸

**Task ì¶œë ¥ í™•ì¸**:
```bash
Read: C:\Users\home\AppData\Local\Temp\claude\...\tasks\bb7020e.output
```

**ì˜ˆìƒ ê²°ê³¼**:
- ìˆ˜ì§‘ëŸ‰: 1,000ê°œ (10 ì¹´í…Œê³ ë¦¬ Ã— 100ê°œ)
- sentiment ë¶„í¬:
  - negative: 200ê°œ (20%)
  - positive: 200ê°œ (20%)
  - **free: 600ê°œ (60%)** âœ… ì˜¬ë°”ë¦„!

**í™•ì¸ ìŠ¤í¬ë¦½íŠ¸**:
```bash
python check_test_data.py
```

**ê¸°ëŒ€ ì¶œë ¥**:
```
[Sentimentë³„ ë¶„í¬]
  - negative: 200ê°œ
  - positive: 200ê°œ
  - free: 600ê°œ      # â† ì´ì „ì—ëŠ” 'neutral'ì´ì—ˆìŒ
```

### 2. V30 í‰ê°€ ì‹¤í–‰

**ì¬ìˆ˜ì§‘ ì™„ë£Œ í›„**:
```bash
python evaluate_v30.py --politician_id=d0a5d6e1 --politician_name="ì¡°ì€í¬" --parallel
```

**ì˜ˆìƒ ì†Œìš”**: ì•½ 15-20ë¶„

### 3. V30 ì ìˆ˜ ê³„ì‚°

**í‰ê°€ ì™„ë£Œ í›„**:
```bash
python calculate_v30_scores.py --politician_id=d0a5d6e1 --politician_name="ì¡°ì€í¬"
```

**ê¸°ëŒ€ ê²°ê³¼**:
- ì´ì „ë³´ë‹¤ **ë” ë‹¤ì–‘í•œ ì ìˆ˜ ë¶„í¬**
- ì¹´í…Œê³ ë¦¬ ê°„ ì°¨ì´ ë” ëª…í™•

**ì˜ˆìƒ ì ìˆ˜ ë²”ìœ„**:
```
ìµœê³ : 80-85ì  (ê°•ì  ì˜ì—­)
ì¤‘ê°„: 65-75ì  (ë³´í†µ)
ìµœì €: 50-65ì  (ê°œì„  í•„ìš”)

â†’ ë” ë„“ì€ ë¶„í¬ (30-35ì  ë²”ìœ„)
```

### 4. ì´ì „ vs ìƒˆë¡œìš´ ì ìˆ˜ ë¹„êµ

**ë¹„êµ ìŠ¤í¬ë¦½íŠ¸** (ì‘ì„± í•„ìš”):
```python
# compare_scores.py

old_scores = {
    'expertise': 76, 'leadership': 76, 'vision': 75,
    # ... (ì´ì „ ì ìˆ˜)
}

new_scores = {
    # ... (ìƒˆë¡œìš´ ì ìˆ˜)
}

# ì°¨ì´ ë¶„ì„
```

---

## ğŸ” ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

ìˆ˜ì •ì´ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸:

- [ ] **ìˆ˜ì§‘ ë°ì´í„°**: `sentiment='free'` ê°’ í™•ì¸
  ```sql
  SELECT sentiment, COUNT(*)
  FROM collected_data_v30
  WHERE politician_id='d0a5d6e1'
  GROUP BY sentiment;
  ```

  ê¸°ëŒ€ ê²°ê³¼:
  ```
  negative | 200
  positive | 200
  free     | 600  â† ì´ê²ƒì´ ë³´ì—¬ì•¼ í•¨!
  ```

- [ ] **ì ìˆ˜ ë‹¤ì–‘ì„±**: ì¹´í…Œê³ ë¦¬ ê°„ ì°¨ì´ í™•ëŒ€
  ```
  ì´ì „: 70-77ì  (7ì  ì°¨ì´)
  ìƒˆë¡œ: 50-85ì  (35ì  ì°¨ì´) ì˜ˆìƒ
  ```

- [ ] **ë°ì´í„° í’ˆì§ˆ**: free sentiment ë°ì´í„°ê°€ ì‹¤ì œë¡œ ë‹¤ì–‘í•œê°€?
  ```python
  # freeë¡œ í‘œì‹œëœ ë°ì´í„° ìƒ˜í”Œ í™•ì¸
  # ê¸ì •/ë¶€ì •/ì¤‘ë¦½ì´ ê³¨ê³ ë£¨ ì„ì—¬ìˆëŠ”ì§€ í™•ì¸
  ```

---

## ğŸ“š ì°¸ì¡° íŒŒì¼

### ìˆ˜ì •ëœ íŒŒì¼
1. `migrations/add_free_sentiment.sql` - DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì •
2. `ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸/collect_v30.py` - ì½”ë“œ ìˆ˜ì •
3. `ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸/fix_sentiment_constraint.py` - DB ìˆ˜ì • ì•ˆë‚´

### ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
1. `ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸/collect_v30.py` - ì¬ìˆ˜ì§‘
2. `ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸/evaluate_v30.py` - ì¬í‰ê°€
3. `ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸/calculate_v30_scores.py` - ì ìˆ˜ ê³„ì‚°
4. `check_test_data.py` - ë°ì´í„° í™•ì¸

### ë¬¸ì„œ
1. `.claude/work_logs/current.md` - ì‘ì—… ë¡œê·¸ ì—…ë°ì´íŠ¸ë¨
2. ì´ íŒŒì¼ - ì¸ê³„ ë¬¸ì„œ

---

## ğŸ’¡ ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### ë‹¤ë¥¸ ì •ì¹˜ì¸ ë°ì´í„°ë„ ì˜í–¥ ë°›ìŒ

**í™•ì¸ í•„ìš”**:
```sql
SELECT politician_name, sentiment, COUNT(*)
FROM collected_data_v30
WHERE sentiment='neutral'
GROUP BY politician_name, sentiment;
```

**ë§Œì•½ neutralì´ ë§ë‹¤ë©´**:
- í•´ë‹¹ ì •ì¹˜ì¸ë“¤ë„ ì¬ìˆ˜ì§‘ í•„ìš”
- ìš°ì„ ìˆœìœ„: ì´ë¯¸ í‰ê°€ ì™„ë£Œëœ ì •ì¹˜ì¸

### V28 ì‹œìŠ¤í…œë„ í™•ì¸ í•„ìš”

V28ì—ë„ ë™ì¼í•œ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŒ:
```bash
# V28 collect ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
grep -n "topic_mode_to_sentiment" ì„¤ê³„ë¬¸ì„œ_V7.0/ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸/collect_v28*.py
```

---

## ğŸ¯ ìµœì¢… ëª©í‘œ

**ìˆ˜ì • ì „ (ì˜ëª»ëœ ê²°ê³¼)**:
```
sentiment ë¶„í¬: negative 20%, positive 20%, neutral 60%
ì ìˆ˜ ë¶„í¬: 70-77ì  (ê· ì¼, ë‹¤ì–‘ì„± ì—†ìŒ)
```

**ìˆ˜ì • í›„ (ì˜¬ë°”ë¥¸ ê²°ê³¼)**:
```
sentiment ë¶„í¬: negative 20%, positive 20%, free 60%
ì ìˆ˜ ë¶„í¬: 50-85ì  (ë‹¤ì–‘, ì‹¤ì œ ì°¨ì´ ë°˜ì˜)
```

---

## ğŸ“ ë¬¸ì œ ë°œìƒ ì‹œ

### ì¬ìˆ˜ì§‘ ì‹¤íŒ¨
- ë¡œê·¸ í™•ì¸: `tasks/bb7020e.output`
- ìˆ˜ë™ ì¬ì‹¤í–‰: `python collect_v30.py ...`

### ì ìˆ˜ê°€ ì—¬ì „íˆ ë¹„ìŠ·í•¨
- sentiment='free' ë°ì´í„° ë‚´ìš© í™•ì¸
- AI í‰ê°€ ë‹¤ì–‘ì„± í™•ì¸
- í‰ê°€ í”„ë¡¬í”„íŠ¸ ê²€í† 

### DB ì˜¤ë¥˜
- sentiment ì œì•½ ì¡°ê±´ ì¬í™•ì¸
- `migrations/add_free_sentiment.sql` ì¬ì‹¤í–‰

---

**ì‘ì—… ì™„ë£Œ ì‹œ**:
1. `.claude/work_logs/current.md` ì—…ë°ì´íŠ¸
2. ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ ë³´ê³ 
3. ì´ì „ vs ìƒˆë¡œìš´ ì ìˆ˜ ë¹„êµ ì œì‹œ

**ê¸´ê¸‰ ì—°ë½**: ì‚¬ìš©ìì—ê²Œ ì¦‰ì‹œ ë³´ê³ 

---

**Good Luck! ğŸ€**

