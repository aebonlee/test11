# ì‘ì—…ì§€ì‹œì„œ: P4BA14

## ğŸ“‹ ê¸°ë³¸ ì •ë³´

- **ì‘ì—… ID**: P4BA14
- **ì—…ë¬´ëª…**: AI í‰ê°€ ìƒì„± ì—”ì§„ (OpenAI API í†µí•©)
- **Phase**: Phase 4
- **Area**: Backend APIs (BA)
- **ì„œë¸Œ ì—ì´ì „íŠ¸**: backend-developer
- **ì‘ì—… ë°©ì‹**: AI-Only

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

OpenAI APIë¥¼ í†µí•©í•˜ì—¬ ì‹¤ì œ AI í‰ê°€ë¥¼ ìƒì„±í•˜ê³ , 5ê°œ AI ëª¨ë¸(Claude, ChatGPT, Gemini, Grok, Perplexity)ì˜ í‰ê°€ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥

---

## ğŸ”§ ì‚¬ìš© ë„êµ¬

```
[Claude ë„êµ¬]
Read, Edit, Write, Grep, Glob, Bash

[ê¸°ìˆ  ìŠ¤íƒ]
TypeScript, Next.js, OpenAI API, Anthropic API, Google AI API, Zod

[ì™¸ë¶€ API]
- OpenAI API (GPT-4)
- Anthropic API (Claude)
- Google AI API (Gemini)
- xAI API (Grok)
- Perplexity API

[ì „ë¬¸ ìŠ¤í‚¬]
api-builder, api-test
```

## ğŸ”— ì˜ì¡´ì„± ì •ë³´

**ì˜ì¡´ì„± ì²´ì¸**: P3BA11, P3BA12

ì´ ì‘ì—…ì„ ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‘ì—…ì´ ì™„ë£Œë˜ì–´ì•¼ í•©ë‹ˆë‹¤:
- P3BA11: AI í‰ê°€ ì¡°íšŒ API (ì¡°íšŒ ê¸°ëŠ¥)
- P3BA12: AI í‰ê°€ ìƒì„± API (ë°ì´í„° ì €ì¥ ê¸°ëŠ¥)

---

## ğŸ“¦ ê¸°ëŒ€ ê²°ê³¼ë¬¼

- `src/lib/ai/evaluation-engine.ts` (AI í‰ê°€ ìƒì„± ì—”ì§„)
- `src/lib/ai/prompts/evaluation-prompt.ts` (í‰ê°€ í”„ë¡¬í”„íŠ¸)
- `src/lib/ai/clients/openai-client.ts` (OpenAI í´ë¼ì´ì–¸íŠ¸)
- `src/lib/ai/clients/anthropic-client.ts` (Anthropic í´ë¼ì´ì–¸íŠ¸)
- `src/lib/ai/clients/google-client.ts` (Google AI í´ë¼ì´ì–¸íŠ¸)
- `src/lib/ai/clients/xai-client.ts` (xAI í´ë¼ì´ì–¸íŠ¸)
- `src/lib/ai/clients/perplexity-client.ts` (Perplexity í´ë¼ì´ì–¸íŠ¸)
- `src/app/api/evaluations/generate-ai/route.ts` (AI í‰ê°€ ìƒì„± API)

**êµ¬í˜„í•´ì•¼ í•  ì„¸ë¶€ í•­ëª©**:

1. **AI í‰ê°€ í”„ë¡¬í”„íŠ¸ ì„¤ê³„**
   - 10ê°œ í‰ê°€ ê¸°ì¤€ ëª…í™•í™”
   - í‰ê°€ ê·¼ê±° ìš”êµ¬ì‚¬í•­ (ê° ê¸°ì¤€ë³„ 3,000ì)
   - JSON ì‘ë‹µ í¬ë§· ì •ì˜

2. **5ê°œ AI í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„**
   - OpenAI API (GPT-4)
   - Anthropic API (Claude Sonnet 4.5)
   - Google AI API (Gemini 1.5 Pro)
   - xAI API (Grok)
   - Perplexity API

3. **AI í‰ê°€ ìƒì„± ì—”ì§„**
   - ì •ì¹˜ì¸ ë°ì´í„° ìˆ˜ì§‘ (í™œë™, ê³µì•½, ë‰´ìŠ¤)
   - 5ê°œ AI ëª¨ë¸ ë³‘ë ¬ í˜¸ì¶œ
   - ì‘ë‹µ íŒŒì‹± ë° ê²€ì¦
   - ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ (P3BA12 API í˜¸ì¶œ)

4. **ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„**
   - API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
   - Rate limiting ì²˜ë¦¬
   - íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ (60ì´ˆ)

5. **ë¹„ìš© ìµœì í™”**
   - ìºì‹± ì „ëµ (7ì¼)
   - ì¦ë¶„ ì—…ë°ì´íŠ¸ (ë³€ê²½ ì‚¬í•­ë§Œ)

---

## ğŸ“ ì‘ì—… ì§€ì‹œì‚¬í•­

### 1. ì¤€ë¹„ ë‹¨ê³„

- í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (`.env.local`):
  ```
  OPENAI_API_KEY=sk-...
  ANTHROPIC_API_KEY=sk-ant-...
  GOOGLE_AI_API_KEY=...
  XAI_API_KEY=...
  PERPLEXITY_API_KEY=...
  ```
- npm íŒ¨í‚¤ì§€ ì„¤ì¹˜:
  ```bash
  npm install openai @anthropic-ai/sdk @google/generative-ai
  ```

### 2. êµ¬í˜„ ë‹¨ê³„

**2.1 í‰ê°€ í”„ë¡¬í”„íŠ¸ ì„¤ê³„**

```typescript
// src/lib/ai/prompts/evaluation-prompt.ts
export const EVALUATION_PROMPT = `
You are an expert political analyst evaluating a Korean politician.

Politician Information:
- Name: {name}
- Party: {party}
- Position: {position}
- Recent Activities: {activities}
- Campaign Promises: {promises}
- News Articles: {news}

Evaluate this politician on the following 10 criteria (0-100 scale):

1. Integrity (ì²­ë ´ì„±): Anti-corruption, ethical conduct
2. Expertise (ì „ë¬¸ì„±): Policy knowledge, professional background
3. Communication (ì†Œí†µëŠ¥ë ¥): Public engagement, responsiveness
4. Leadership (ë¦¬ë”ì‹­): Decision-making, vision
5. Transparency (íˆ¬ëª…ì„±): Disclosure, accountability
6. Responsiveness (ëŒ€ì‘ì„±): Constituent service, accessibility
7. Innovation (í˜ì‹ ì„±): New ideas, creative solutions
8. Collaboration (í˜‘ë ¥ì„±): Cross-party cooperation
9. Constituency Service (ì§€ì—­ë´‰ì‚¬): Local engagement
10. Policy Impact (ì •ì±…ì˜í–¥ë ¥): Legislative achievements

For each criterion, provide:
- Score (0-100)
- Evidence (3,000 characters minimum in Korean)

Output format: JSON
{
  "overall_score": 85,
  "grade": "Rose",
  "criteria": {
    "integrity": {
      "score": 90,
      "evidence": "..."
    },
    ...
  }
}
`
```

**2.2 AI í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„**

```typescript
// src/lib/ai/clients/openai-client.ts
import OpenAI from 'openai'

export class OpenAIEvaluationClient {
  private client: OpenAI

  constructor() {
    this.client = new OpenAI({
      apiKey: process.env.OPENAI_API_KEY
    })
  }

  async generateEvaluation(prompt: string): Promise<EvaluationResult> {
    const response = await this.client.chat.completions.create({
      model: 'gpt-4-turbo-preview',
      messages: [{ role: 'user', content: prompt }],
      temperature: 0.7,
      max_tokens: 16000,
      response_format: { type: 'json_object' }
    })

    return JSON.parse(response.choices[0].message.content || '{}')
  }
}
```

**2.3 AI í‰ê°€ ìƒì„± ì—”ì§„**

```typescript
// src/lib/ai/evaluation-engine.ts
export class EvaluationEngine {
  private clients: {
    openai: OpenAIEvaluationClient
    anthropic: AnthropicEvaluationClient
    google: GoogleEvaluationClient
    xai: XAIEvaluationClient
    perplexity: PerplexityEvaluationClient
  }

  async generateAllEvaluations(politicianId: string): Promise<Evaluation[]> {
    // 1. ì •ì¹˜ì¸ ë°ì´í„° ìˆ˜ì§‘
    const politician = await this.fetchPoliticianData(politicianId)

    // 2. í”„ë¡¬í”„íŠ¸ ìƒì„±
    const prompt = this.createPrompt(politician)

    // 3. 5ê°œ AI ëª¨ë¸ ë³‘ë ¬ í˜¸ì¶œ
    const results = await Promise.allSettled([
      this.clients.openai.generateEvaluation(prompt),
      this.clients.anthropic.generateEvaluation(prompt),
      this.clients.google.generateEvaluation(prompt),
      this.clients.xai.generateEvaluation(prompt),
      this.clients.perplexity.generateEvaluation(prompt)
    ])

    // 4. ê²°ê³¼ íŒŒì‹± ë° ì €ì¥
    const evaluations = results
      .filter(r => r.status === 'fulfilled')
      .map(r => (r as PromiseFulfilledResult<EvaluationResult>).value)

    return evaluations
  }
}
```

**2.4 API ì—”ë“œí¬ì¸íŠ¸**

```typescript
// src/app/api/evaluations/generate-ai/route.ts
import { EvaluationEngine } from '@/lib/ai/evaluation-engine'

export async function POST(request: NextRequest) {
  // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
  // AI í‰ê°€ ìƒì„±
  // ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ (P3BA12 API í˜¸ì¶œ)
}
```

### 3. ê²€ì¦ ë‹¨ê³„

- íƒ€ì… ì²´í¬: `npm run type-check`
- ë¹Œë“œ: `npm run build`
- API í…ŒìŠ¤íŠ¸: ì‹¤ì œ AI í˜¸ì¶œ í…ŒìŠ¤íŠ¸
- ë¹„ìš© ëª¨ë‹ˆí„°ë§

### 4. ì™„ë£Œ ë‹¨ê³„

- ìƒì„±ëœ íŒŒì¼ ëª©ë¡ í™•ì¸
- PROJECT GRID ì—…ë°ì´íŠ¸
- í™˜ê²½ ë³€ìˆ˜ ë¬¸ì„œí™”

---

## âœ… ì™„ë£Œ ê¸°ì¤€

- [ ] 5ê°œ AI í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ì™„ë£Œ
- [ ] í‰ê°€ í”„ë¡¬í”„íŠ¸ ì„¤ê³„ ì™„ë£Œ
- [ ] AI í‰ê°€ ìƒì„± ì—”ì§„ êµ¬í˜„ ì™„ë£Œ
- [ ] API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ ì™„ë£Œ
- [ ] ë³‘ë ¬ í˜¸ì¶œ ì •ìƒ ì‘ë™
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„ êµ¬í˜„
- [ ] TypeScript íƒ€ì… ì²´í¬ í†µê³¼
- [ ] Next.js ë¹Œë“œ ì„±ê³µ
- [ ] ì‹¤ì œ AI í˜¸ì¶œ í…ŒìŠ¤íŠ¸ ì„±ê³µ
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ í™•ì¸
- [ ] PROJECT GRID ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ

---

**ì‘ì—…ì§€ì‹œì„œ ìƒì„±ì¼**: 2025-11-09
**PROJECT GRID Version**: v4.2
