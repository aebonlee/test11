# 작업지시서: P6O2

## 📋 기본 정보

- **작업 ID**: P6O2
- **업무명**: Vercel 배포 설정
- **Phase**: Phase 6
- **Area**: Operations (O)
- **서브 에이전트**: devops-engineer
- **작업 방식**: AI-Only

---

## 🎯 작업 목표

Vercel 프로덕션 배포 설정

---

## 🔧 사용 도구

```
[Claude 도구]
Read, Edit, Write, Grep, Glob, Bash

[기술 스택]
GitHub Actions, Vercel, Sentry

[전문 스킬]
ci-cd, deployment
```

**도구 설명**:
- **Claude 도구**: Claude Code의 기본 기능 (Read, Write, Edit, Bash, Glob, Grep 등)
- **기술 스택**: 프로젝트에 사용되는 프레임워크 및 라이브러리
- **전문 스킬**: Anthropic 빌트인 스킬 (.claude/skills/*.md 참조)

## 🔗 의존성 정보

**의존성 체인**: P5T1, P5T2, P5T3

이 작업을 시작하기 전에 다음 작업이 완료되어야 합니다: P5T1, P5T2, P5T3

---

## 📦 기대 결과물

**생성할 파일:**
1. `vercel.json` - Vercel 배포 설정

**vercel.json 설정 예시:**
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "rewrites": [
    {
      "source": "/api/:path*",
      "destination": "/api/:path*"
    }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        }
      ]
    }
  ],
  "crons": []
}
```

**환경 변수 (Vercel Dashboard에서 설정):**
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `SUPABASE_SERVICE_ROLE_KEY`
- `OPENAI_API_KEY`
- `SENTRY_DSN`
- `NEXT_PUBLIC_GA_ID`

**도메인 연결:**
- Production: `politician-finder.com`
- Preview: `preview.politician-finder.com`

**구현해야 할 세부 항목**:

1. vercel.json 설정 (빌드, 라우팅, 헤더, Cron)
2. 환경 변수 설정 (Vercel Dashboard에서 설정)
3. 도메인 연결 (Custom Domain)
4. Build 설정 최적화 (캐싱, 병렬 빌드)
5. Preview 배포 설정 (PR별 자동 배포)
6. 보안 헤더 설정 (CSP, X-Frame-Options)

각 항목을 체계적으로 구현하고 테스트하세요.

---

## 💾 구현 파일 저장 위치

**루트 폴더**: `5_DevOps/`

**파일 경로**:
```
5_DevOps/
└── vercel.json
```

**절대 경로 별칭**: 해당 없음 (DevOps 설정 파일)

---

## 📝 작업 지시사항

### 1. 준비 단계

- 프로젝트 루트 디렉토리에서 작업 시작
- 필요한 도구 확인: GitHub Actions/Vercel/Sentry
- 의존성 작업 완료 확인 (P5T1) (P5T2) (P5T3)

### 2. 구현 단계

**구현해야 할 세부 항목**:

1. vercel.json 설정
2. 환경 변수 설정 (Vercel Dashboard)
3. 도메인 연결
4. Build 설정 최적화
5. Preview 배포 설정

각 항목을 체계적으로 구현하고 테스트하세요.

### 3. 검증 단계

- 작성한 코드의 정상 동작 확인
- 타입 체크 및 린트 통과
- 필요한 경우 단위 테스트 작성
- 코드 리뷰 준비

### 4. 완료 단계

- 생성된 파일 목록 확인
- PROJECT GRID 상태 업데이트
- 다음 의존 작업에 영향 확인

---

## ✅ 완료 기준

- [ ] Vercel 배포 설정 기능이 정상적으로 구현됨
- [ ] 기대 결과물이 모두 생성됨
- [ ] 코드가 정상적으로 빌드/실행됨
- [ ] 타입 체크 및 린트 통과
- [ ] PROJECT GRID 상태 업데이트 완료
- [ ] 프로덕션 배포 성공
- [ ] 도메인 연결 확인

---

**작업지시서 생성일**: 2025-11-06
**PROJECT GRID Version**: v4.0
