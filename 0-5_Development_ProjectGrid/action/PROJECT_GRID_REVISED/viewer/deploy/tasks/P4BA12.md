# ì‘ì—…ì§€ì‹œì„œ: P4BA12

## ğŸ“‹ ê¸°ë³¸ ì •ë³´

- **ì‘ì—… ID**: P4BA12
- **ì—…ë¬´ëª…**: ì‹œìŠ¤í…œ ì„¤ì • API
- **Phase**: Phase 4
- **Area**: Backend APIs (BA)
- **ì„œë¸Œ ì—ì´ì „íŠ¸**: api-designer
- **ì‘ì—… ë°©ì‹**: AI-Only

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

ì „ì—­ ì‹œìŠ¤í…œ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” APIë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.

---

## ğŸ”§ ì‚¬ìš© ë„êµ¬

```
[Claude ë„êµ¬]
Read, Edit, Write, Grep, Glob, Bash

[ê¸°ìˆ  ìŠ¤íƒ]
TypeScript, Next.js API Routes, Supabase, Zod

[ì „ë¬¸ ìŠ¤í‚¬]
api-builder, fullstack-dev
```

**ë„êµ¬ ì„¤ëª…**:
- **Claude ë„êµ¬**: Claude Codeì˜ ê¸°ë³¸ ê¸°ëŠ¥ (Read, Write, Edit, Bash, Glob, Grep ë“±)
- **ê¸°ìˆ  ìŠ¤íƒ**: í”„ë¡œì íŠ¸ì— ì‚¬ìš©ë˜ëŠ” í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬
- **ì „ë¬¸ ìŠ¤í‚¬**: Anthropic ë¹ŒíŠ¸ì¸ ìŠ¤í‚¬ (.claude/skills/*.md ì°¸ì¡°)

## ğŸ”— ì˜ì¡´ì„± ì •ë³´

**ì˜ì¡´ì„± ì²´ì¸**: P2D1

ì´ ì‘ì—…ì„ ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‘ì—…ì´ ì™„ë£Œë˜ì–´ì•¼ í•©ë‹ˆë‹¤: P2D1 (Database ìŠ¤í‚¤ë§ˆ)

---

## ğŸ“¦ ê¸°ëŒ€ ê²°ê³¼ë¬¼

- app/api/admin/system-settings/route.ts
- lib/system/settings-manager.ts
- lib/system/cache-manager.ts

**êµ¬í˜„í•´ì•¼ í•  ì„¸ë¶€ í•­ëª©**:

1. **í¬ì¸íŠ¸ ê·œì¹™ ì„¤ì •**: í™œë™ë³„ í¬ì¸íŠ¸ ì ìˆ˜
2. **ë“±ê¸‰ ê¸°ì¤€ ì„¤ì •**: ë“±ê¸‰ë³„ í•„ìš” í¬ì¸íŠ¸
3. **ê¸°ëŠ¥ í† ê¸€**: íŠ¹ì • ê¸°ëŠ¥ on/off
4. **ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ**: ì „ì²´ ì„œë¹„ìŠ¤ ì ê²€ ëª¨ë“œ

ê° í•­ëª©ì„ ì²´ê³„ì ìœ¼ë¡œ êµ¬í˜„í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.

---

## ğŸ’¾ êµ¬í˜„ íŒŒì¼ ì €ì¥ ìœ„ì¹˜

**ë£¨íŠ¸ í´ë”**: `3_Backend_APIs/`

**íŒŒì¼ ê²½ë¡œ**:
```
3_Backend_APIs/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ admin/
â”‚           â””â”€â”€ system-settings/
â”‚               â””â”€â”€ route.ts
â””â”€â”€ lib/
    â””â”€â”€ system/
        â”œâ”€â”€ settings-manager.ts
        â””â”€â”€ cache-manager.ts
```

**ì ˆëŒ€ ê²½ë¡œ ë³„ì¹­**: `@/` (ì˜ˆ: `import ... from '@/lib/system/settings-manager'`)

---

## ğŸ“ ì‘ì—… ì§€ì‹œì‚¬í•­

### 1. ì¤€ë¹„ ë‹¨ê³„

- í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ì‘ì—… ì‹œì‘
- í•„ìš”í•œ ë„êµ¬ í™•ì¸: TypeScript/Next.js API Routes/Supabase/Zod
- ì˜ì¡´ì„± ì‘ì—… ì™„ë£Œ í™•ì¸ (P2D1)

### 2. êµ¬í˜„ ë‹¨ê³„

**Database ìŠ¤í‚¤ë§ˆ** (P2D1ì— ì¶”ê°€ í•„ìš”):
```sql
CREATE TABLE system_settings (
  key VARCHAR(100) PRIMARY KEY,
  value JSONB NOT NULL,
  description TEXT,
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì´ˆê¸° ì„¤ì •
INSERT INTO system_settings (key, value, description) VALUES
('points.post', '10', 'ê²Œì‹œê¸€ ì‘ì„± ì‹œ í¬ì¸íŠ¸'),
('points.comment', '5', 'ëŒ“ê¸€ ì‘ì„± ì‹œ í¬ì¸íŠ¸'),
('points.like', '1', 'ê³µê° í´ë¦­ ì‹œ í¬ì¸íŠ¸'),
('points.follow', '20', 'íŒ”ë¡œìš° ì‹œ í¬ì¸íŠ¸'),
('features.community', 'true', 'ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ í™œì„±í™”'),
('features.ai_evaluation', 'true', 'AI í‰ê°€ ê¸°ëŠ¥ í™œì„±í™”'),
('maintenance.enabled', 'false', 'ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ'),
('maintenance.message', '"ì„œë¹„ìŠ¤ ì ê²€ ì¤‘ì…ë‹ˆë‹¤"', 'ì ê²€ ë©”ì‹œì§€');

CREATE INDEX idx_system_settings_key ON system_settings(key);
```

**API Endpoints**:
```typescript
GET /api/admin/system-settings - ì „ì²´ ì„¤ì • ì¡°íšŒ
PATCH /api/admin/system-settings - ì„¤ì • ìˆ˜ì •
  Body: {
    key: string;
    value: any;
  }
GET /api/system-settings/public - ê³µê°œ ì„¤ì • ì¡°íšŒ (ìœ ì €ìš©)
```

**ì„¤ì • ì¹´í…Œê³ ë¦¬**:
- points.*: í¬ì¸íŠ¸ ê·œì¹™
- features.*: ê¸°ëŠ¥ í† ê¸€
- maintenance.*: ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ
- limits.*: ê°ì¢… ì œí•œ (ì—…ë¡œë“œ í¬ê¸°, ê²Œì‹œê¸€ ê¸¸ì´ ë“±)

### 3. ê²€ì¦ ë‹¨ê³„

- ì„¤ì • CRUD ê¸°ëŠ¥ ë™ì‘
- ìºì‹œ ì ìš© í™•ì¸
- ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ ë™ì‘ í™•ì¸
- ì„¤ì • ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜

### 4. ì™„ë£Œ ë‹¨ê³„

- ìƒì„±ëœ íŒŒì¼ ëª©ë¡ í™•ì¸
- PROJECT GRID ìƒíƒœ ì—…ë°ì´íŠ¸
- ë‹¤ìŒ ì˜ì¡´ ì‘ì—…ì— ì˜í–¥ í™•ì¸

---

## âœ… ì™„ë£Œ ê¸°ì¤€

- [ ] ì„¤ì • CRUD ê¸°ëŠ¥ ë™ì‘
- [ ] ìºì‹œ ì ìš© í™•ì¸
- [ ] ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ ë™ì‘ í™•ì¸
- [ ] ì„¤ì • ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] API í…ŒìŠ¤íŠ¸ í†µê³¼

---

**ì‘ì—…ì§€ì‹œì„œ ìƒì„±ì¼**: 2025-11-06
**PROJECT GRID Version**: v4.0
