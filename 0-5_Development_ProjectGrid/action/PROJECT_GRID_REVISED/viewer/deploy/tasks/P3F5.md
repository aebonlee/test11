# P3F5: ì •ì¹˜ì¸ í•„í„° ì‹œìŠ¤í…œ ê³ ë„í™” (ì§€ì—­êµ¬ + êµ­íšŒì˜ì› ì„ ê±°êµ¬)

## ğŸ“‹ ì‘ì—… ê°œìš”

**Task ID**: P3F5
**Task Name**: ì •ì¹˜ì¸ í•„í„° ì‹œìŠ¤í…œ ê³ ë„í™”
**Phase**: 3
**Area**: F (Frontend)
**ë‹´ë‹¹**: Frontend Developer
**ìš°ì„ ìˆœìœ„**: High
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 4ì‹œê°„

---

## ğŸ¯ ëª©í‘œ

ì •ì¹˜ì¸ ê²€ìƒ‰ ë° í•„í„° ê¸°ëŠ¥ì„ ê³ ë„í™”í•˜ì—¬ ì‚¬ìš©ìê°€ ì „êµ­ ëª¨ë“  ì§€ì—­ê³¼ êµ­íšŒì˜ì› ì„ ê±°êµ¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •í™•í•˜ê²Œ ì •ì¹˜ì¸ì„ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ê°œì„ í•©ë‹ˆë‹¤.

### ì£¼ìš” ê°œì„  ì‚¬í•­
1. **district í•„ë“œ ì¶”ê°€**: ê¸°ì´ˆ ì§€ì—­ (êµ¬/êµ°/ì‹œ) ì •ë³´ë¥¼ DBì— ì €ì¥
2. **ì „êµ­ ì§€ì—­ ë°ì´í„°**: 17ê°œ ê´‘ì—­ì‹œë„ + ëª¨ë“  ì‹œêµ°êµ¬ ìƒìˆ˜ ë°ì´í„°
3. **êµ­íšŒì˜ì› ì„ ê±°êµ¬**: 22ëŒ€ êµ­íšŒ 254ê°œ ì§€ì—­êµ¬ ì „ì²´ ë°ì´í„°
4. **ì¡°ê±´ë¶€ í•„í„°**: ì¶œë§ˆì§ì¢…ì— ë”°ë¼ "ì§€ì—­" â†” "ì§€ì—­êµ¬" ìë™ ì „í™˜

---

## ğŸ“ ìƒì„¸ ìš”êµ¬ì‚¬í•­

### 1. Database ìŠ¤í‚¤ë§ˆ ë³€ê²½

#### 1.1 district í•„ë“œ ì¶”ê°€
```sql
-- politicians í…Œì´ë¸”ì— district ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE politicians
  ADD COLUMN IF NOT EXISTS district VARCHAR(100);

COMMENT ON COLUMN politicians.district IS 'ê¸°ì´ˆ ì§€ì—­ (ì˜ˆ: ê°•ë‚¨êµ¬ ê°‘, ì„œì´ˆêµ¬ ì„)';
```

**í•„ë“œ ì„¤ëª…**:
- `region`: ê´‘ì—­ ì§€ì—­ (ì˜ˆ: "ì„œìš¸", "ë¶€ì‚°", "ê²½ê¸°")
- `district`: ê¸°ì´ˆ ì§€ì—­ (ì˜ˆ: "ê°•ë‚¨êµ¬", "ê°•ë‚¨êµ¬ ê°‘", "ìˆ˜ì›ì‹œ ê°‘")

**ë°ì´í„° ì˜ˆì‹œ**:
- êµ­íšŒì˜ì›: region="ì„œìš¸", district="ê°•ë‚¨êµ¬ ê°‘"
- ê´‘ì—­ì˜ì›: region="ì„œìš¸", district="ê°•ë‚¨êµ¬"
- ê¸°ì´ˆì˜ì›: region="ì„œìš¸", district="ê°•ë‚¨êµ¬"

### 2. ìƒìˆ˜ ë°ì´í„° íŒŒì¼ ìƒì„±

#### 2.1 ì „êµ­ ì§€ì—­ ë°ì´í„° (`src/constants/regions.ts`)

**êµ¬ì¡°**:
```typescript
export interface RegionGroup {
  label: string;        // "ì„œìš¸", "ë¶€ì‚°"
  fullName: string;     // "ì„œìš¸íŠ¹ë³„ì‹œ", "ë¶€ì‚°ê´‘ì—­ì‹œ"
  districts: string[];  // ["ê°•ë‚¨êµ¬", "ê°•ë™êµ¬", ...]
}

export const REGIONS: RegionGroup[] = [...]
```

**í¬í•¨ ë‚´ìš©**:
- 17ê°œ ê´‘ì—­ì‹œë„
- ì „ì²´ ì‹œêµ°êµ¬ (ì„œìš¸ 25êµ¬, ë¶€ì‚° 16êµ¬êµ°, ê²½ê¸° 31ì‹œêµ° ë“±)

#### 2.2 êµ­íšŒì˜ì› ì„ ê±°êµ¬ ë°ì´í„° (`src/constants/constituencies.ts`)

**êµ¬ì¡°**:
```typescript
export interface Constituency {
  metropolitanArea: string;  // "ì„œìš¸", "ë¶€ì‚°"
  fullName: string;          // "ì„œìš¸íŠ¹ë³„ì‹œ"
  districts: string[];       // ["ì¢…ë¡œêµ¬", "ê°•ë‚¨êµ¬ ê°‘", "ê°•ë‚¨êµ¬ ì„", ...]
}

export const CONSTITUENCIES: Constituency[] = [...]
```

**í¬í•¨ ë‚´ìš©**:
- 22ëŒ€ êµ­íšŒ 254ê°œ ì§€ì—­êµ¬ ì „ì²´
- ê°‘/ì„/ë³‘/ì • êµ¬ë¶„
- í†µí•© ì„ ê±°êµ¬ (ì˜ˆ: "ì¤‘êµ¬Â·ì„±ë™êµ¬ ê°‘", "ë™ë‘ì²œì‹œÂ·ì–‘ì£¼ì‹œÂ·ì—°ì²œêµ° ì„")

**ê´‘ì—­ë³„ ì˜ì„ ìˆ˜**:
- ì„œìš¸: 48ì„
- ê²½ê¸°: 60ì„
- ë¶€ì‚°: 18ì„
- ëŒ€êµ¬: 12ì„
- ì¸ì²œ: 15ì„
- ê´‘ì£¼: 9ì„
- ëŒ€ì „: 7ì„
- ìš¸ì‚°: 6ì„
- ì„¸ì¢…: 1ì„
- ê°•ì›: 8ì„
- ì¶©ë¶: 8ì„
- ì¶©ë‚¨: 11ì„
- ì „ë¶: 10ì„
- ì „ë‚¨: 12ì„
- ê²½ë¶: 14ì„
- ê²½ë‚¨: 16ì„
- ì œì£¼: 3ì„

### 3. Frontend ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

#### 3.1 ì •ì¹˜ì¸ ëª©ë¡ í˜ì´ì§€ (`src/app/politicians/page.tsx`)

**í•„í„° UI ê°œì„ **:
```typescript
// ì¡°ê±´ë¶€ ë¼ë²¨
<label>
  {categoryFilter === 'êµ­íšŒì˜ì›' ? 'ì§€ì—­êµ¬' : 'ì§€ì—­'}
</label>

// ì¡°ê±´ë¶€ ë“œë¡­ë‹¤ìš´
<select value={regionFilter} onChange={...}>
  <option value="">ì „ì²´</option>

  {categoryFilter === 'êµ­íšŒì˜ì›' ? (
    // êµ­íšŒì˜ì› ì„ ê±°êµ¬ ë“œë¡­ë‹¤ìš´
    CONSTITUENCIES.map((constituency) => (
      <optgroup label={constituency.metropolitanArea}>
        {constituency.districts.map((district) => (
          <option value={`${constituency.metropolitanArea} ${district}`}>
            {district}
          </option>
        ))}
      </optgroup>
    ))
  ) : (
    // ì¼ë°˜ ì§€ì—­ ë“œë¡­ë‹¤ìš´
    REGIONS.map((region) => (
      <optgroup label={region.label}>
        <option value={region.fullName}>{region.fullName} (ì „ì²´)</option>
        {region.districts.map((district) => (
          <option value={`${region.label} ${district}`}>
            {district}
          </option>
        ))}
      </optgroup>
    ))
  )}
</select>
```

**í•„í„°ë§ ë¡œì§**:
```typescript
// ì§€ì—­ í•„í„° ë¡œì§
let matchesRegion = !regionFilter;
if (regionFilter) {
  const politicianFullLocation = p.district
    ? `${p.region} ${p.district}`
    : p.region;

  // ê´‘ì—­ ì „ì²´ ì„ íƒ ì‹œ (ì˜ˆ: "ì„œìš¸íŠ¹ë³„ì‹œ")
  const isMetropolitanFilter =
    regionFilter.includes('íŠ¹ë³„ì‹œ') ||
    regionFilter.includes('ê´‘ì—­ì‹œ') ||
    regionFilter.includes('íŠ¹ë³„ìì¹˜') ||
    regionFilter.endsWith('ë„');

  if (isMetropolitanFilter) {
    // ê´‘ì—­ ì „ì²´ ë§¤ì¹­
    matchesRegion = p.region === regionFilter.replace(/íŠ¹ë³„ì‹œ|ê´‘ì—­ì‹œ|íŠ¹ë³„ìì¹˜ì‹œ|íŠ¹ë³„ìì¹˜ë„|ë„/g, '');
  } else {
    // "ê´‘ì—­ + ê¸°ì´ˆ" ì •í™• ë§¤ì¹­
    matchesRegion = politicianFullLocation === regionFilter;
  }
}
```

#### 3.2 ê´€ë¦¬ì í˜ì´ì§€ (`src/app/admin/politicians/page.tsx`)

**í¼ í•„ë“œ ì¶”ê°€**:
```typescript
const [addFormData, setAddFormData] = useState({
  name: '',
  party: '',
  position: '',
  region: '',     // ê´‘ì—­ ì§€ì—­
  district: '',   // ê¸°ì´ˆ ì§€ì—­ (í•„ìˆ˜)
  identity: '',
  // ...
});
```

**ìœ íš¨ì„± ê²€ì¦**:
```typescript
if (!addFormData.name || !addFormData.party || !addFormData.position ||
    !addFormData.region || !addFormData.district || !addFormData.identity) {
  alert('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
  return;
}
```

### 4. API ìˆ˜ì •

#### 4.1 ì •ì¹˜ì¸ ì¶”ê°€ API (`src/app/api/admin/politicians/route.ts`)

**ìŠ¤í‚¤ë§ˆ ê²€ì¦**:
```typescript
const schema = z.object({
  name: z.string().min(1, "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"),
  party: z.string().min(1, "ì†Œì† ì •ë‹¹ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"),
  position: z.string().min(1, "ì¶œë§ˆì§ì¢…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"),
  region: z.string().min(1, "ê´‘ì—­ ì§€ì—­ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"),
  district: z.string().min(1, "ê¸°ì´ˆ ì§€ì—­ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"), // í•„ìˆ˜ë¡œ ë³€ê²½
  identity: z.string().min(1, "ì‹ ë¶„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"),
  // ...
});
```

---

## ğŸ”„ ì‘ì—… íë¦„

### 1ë‹¨ê³„: Database ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
# add_district_field.sql íŒŒì¼ ìƒì„±
# Supabase Studioì—ì„œ SQL ì‹¤í–‰
```

### 2ë‹¨ê³„: ìƒìˆ˜ íŒŒì¼ ìƒì„±
```bash
# src/constants/regions.ts ìƒì„±
# src/constants/constituencies.ts ìƒì„±
```

### 3ë‹¨ê³„: Frontend ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •
```bash
# src/app/politicians/page.tsx ìˆ˜ì •
# src/app/admin/politicians/page.tsx ìˆ˜ì •
```

### 4ë‹¨ê³„: API ìˆ˜ì •
```bash
# src/app/api/admin/politicians/route.ts ìˆ˜ì •
```

### 5ë‹¨ê³„: ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
```bash
npm run build
# ë¹Œë“œ ì„±ê³µ í™•ì¸
# ë¡œì»¬ í…ŒìŠ¤íŠ¸
```

---

## ğŸ“‚ ìƒì„±/ìˆ˜ì • íŒŒì¼ ëª©ë¡

### ìƒì„± íŒŒì¼
1. `add_district_field.sql` - District í•„ë“œ ì¶”ê°€ SQL
2. `1_Frontend/src/constants/regions.ts` - ì „êµ­ ì§€ì—­ ë°ì´í„°
3. `1_Frontend/src/constants/constituencies.ts` - êµ­íšŒì˜ì› ì„ ê±°êµ¬ ë°ì´í„°

### ìˆ˜ì • íŒŒì¼
1. `1_Frontend/src/app/politicians/page.tsx` - í•„í„° UI ë° ë¡œì§
2. `1_Frontend/src/app/admin/politicians/page.tsx` - ì •ì¹˜ì¸ ì¶”ê°€ í¼
3. `1_Frontend/src/app/api/admin/politicians/route.ts` - API ìŠ¤í‚¤ë§ˆ

---

## âœ… ì™„ë£Œ ì¡°ê±´

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- [ ] District í•„ë“œê°€ DBì— ì¶”ê°€ë¨
- [ ] 17ê°œ ê´‘ì—­ì‹œë„ + ëª¨ë“  ì‹œêµ°êµ¬ ë°ì´í„°ê°€ ìƒìˆ˜ë¡œ ì •ì˜ë¨
- [ ] 254ê°œ êµ­íšŒì˜ì› ì„ ê±°êµ¬ ë°ì´í„°ê°€ ìƒìˆ˜ë¡œ ì •ì˜ë¨
- [ ] ì¶œë§ˆì§ì¢… ì„ íƒ ì‹œ í•„í„°ê°€ ìë™ ì „í™˜ë¨ (êµ­íšŒì˜ì› â†” ì¼ë°˜)
- [ ] ê´‘ì—­ ì „ì²´ ì„ íƒ ì‹œ í•´ë‹¹ ì‹œë„ì˜ ëª¨ë“  ì •ì¹˜ì¸ì´ í‘œì‹œë¨
- [ ] ê¸°ì´ˆ ì§€ì—­ ì„ íƒ ì‹œ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ì •ì¹˜ì¸ë§Œ í‘œì‹œë¨
- [ ] ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ district í•„ìˆ˜ ì…ë ¥ë¨

### ê¸°ìˆ  ìš”êµ¬ì‚¬í•­
- [ ] TypeScript ì»´íŒŒì¼ ì—ëŸ¬ 0ê°œ
- [ ] npm run build ì„±ê³µ
- [ ] ëª¨ë“  í•„í„° ì¡°í•© í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] Git commit ë° push ì™„ë£Œ

### í’ˆì§ˆ ìš”êµ¬ì‚¬í•­
- [ ] ì½”ë“œ ê°€ë…ì„± ì–‘í˜¸
- [ ] íƒ€ì… ì•ˆì •ì„± í™•ë³´
- [ ] ìƒìˆ˜ ë°ì´í„° ì •í™•ì„± ê²€ì¦
- [ ] UI/UX ì¼ê´€ì„± ìœ ì§€

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

ì—†ìŒ

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ì™¸ë¶€ ì°¸ê³ 
- [ì¤‘ì•™ì„ ê±°ê´€ë¦¬ìœ„ì›íšŒ - 22ëŒ€ êµ­íšŒì˜ì› ì„ ê±°êµ¬](https://www.nec.go.kr/)
- [ëŒ€í•œë¯¼êµ­ í–‰ì •êµ¬ì—­](https://ko.wikipedia.org/wiki/ëŒ€í•œë¯¼êµ­ì˜_í–‰ì •_êµ¬ì—­)

### ë‚´ë¶€ ì°¸ê³ 
- `0-2_UIUX_Design/prototypes/html/pages/politicians.html` (í”„ë¡œí† íƒ€ì…)
- Phase 2: P2D1 (Database ìŠ¤í‚¤ë§ˆ)
- Phase 3: P3BA2 (ì •ì¹˜ì¸ ìƒì„¸ API)

---

## ğŸ“Š ì‘ì—… ê²°ê³¼

### Commit ì •ë³´
```
feat: ì§€ì—­ í•„í„° ë“œë¡­ë‹¤ìš´ ì™„ì „ êµ¬í˜„ (ì „êµ­ 17ê°œ ì‹œë„ + ì‹œêµ°êµ¬)
Commit: 5538adb

feat: êµ­íšŒì˜ì› ì„ ê±°êµ¬ í•„í„° êµ¬í˜„ (254ê°œ ì§€ì—­êµ¬ ì „ì²´)
Commit: ad360ce
```

### íŒŒì¼ ë³€ê²½ í†µê³„
- ìƒˆ íŒŒì¼: 2ê°œ (regions.ts, constituencies.ts)
- ìˆ˜ì • íŒŒì¼: 3ê°œ
- ì¶”ê°€ ë¼ì¸: +650
- ì‚­ì œ ë¼ì¸: -18

### ë¹Œë“œ ê²°ê³¼
- TypeScript ì»´íŒŒì¼: âœ… ì„±ê³µ
- Build: âœ… ì„±ê³µ (0 errors)
- Push: âœ… ì™„ë£Œ

---

**ì‘ì„±ì¼**: 2025-11-15
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-11-15
**ìƒíƒœ**: âœ… ì™„ë£Œ
