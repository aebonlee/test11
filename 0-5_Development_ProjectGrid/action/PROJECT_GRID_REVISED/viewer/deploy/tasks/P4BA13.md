# ì‘ì—…ì§€ì‹œì„œ: P4BA13

## ğŸ“‹ ê¸°ë³¸ ì •ë³´

- **ì‘ì—… ID**: P4BA13
- **ì—…ë¬´ëª…**: ê´€ë¦¬ì ì•¡ì…˜ ë¡œê·¸ API
- **Phase**: Phase 4
- **Area**: Backend APIs (BA)
- **ì„œë¸Œ ì—ì´ì „íŠ¸**: api-designer
- **ì‘ì—… ë°©ì‹**: AI-Only

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

ê´€ë¦¬ìì˜ ëª¨ë“  í™œë™ì„ ì¶”ì í•˜ê³  í†µê³„ë¥¼ ì œê³µí•˜ëŠ” APIë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.

---

## ğŸ”§ ì‚¬ìš© ë„êµ¬

```
[Claude ë„êµ¬]
Read, Edit, Write, Grep, Glob, Bash

[ê¸°ìˆ  ìŠ¤íƒ]
TypeScript, Next.js API Routes, Supabase, Zod

[ì „ë¬¸ ìŠ¤í‚¬]
api-builder, db-schema
```

**ë„êµ¬ ì„¤ëª…**:
- **Claude ë„êµ¬**: Claude Codeì˜ ê¸°ë³¸ ê¸°ëŠ¥ (Read, Write, Edit, Bash, Glob, Grep ë“±)
- **ê¸°ìˆ  ìŠ¤íƒ**: í”„ë¡œì íŠ¸ì— ì‚¬ìš©ë˜ëŠ” í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬
- **ì „ë¬¸ ìŠ¤í‚¬**: Anthropic ë¹ŒíŠ¸ì¸ ìŠ¤í‚¬ (.claude/skills/*.md ì°¸ì¡°)

## ğŸ”— ì˜ì¡´ì„± ì •ë³´

**ì˜ì¡´ì„± ì²´ì¸**: P4BA8

ì´ ì‘ì—…ì„ ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‘ì—…ì´ ì™„ë£Œë˜ì–´ì•¼ í•©ë‹ˆë‹¤: P4BA8 (ê°ì‚¬ ë¡œê·¸ API)

---

## ğŸ“¦ ê¸°ëŒ€ ê²°ê³¼ë¬¼

- app/api/admin/action-logs/route.ts
- app/api/admin/action-logs/stats/route.ts
- lib/admin/activity-tracker.ts

**êµ¬í˜„í•´ì•¼ í•  ì„¸ë¶€ í•­ëª©**:

1. **í™œë™ ì¶”ì **: ê´€ë¦¬ìë³„ í™œë™ ê¸°ë¡
2. **í†µê³„ ì¡°íšŒ**:
   - ê´€ë¦¬ìë³„ ì•¡ì…˜ íšŸìˆ˜
   - ì•¡ì…˜ íƒ€ì…ë³„ ë¶„í¬
   - ì‹œê°„ëŒ€ë³„ í™œë™ëŸ‰
3. **ê¶Œí•œë³„ ë¶„ì„**: ê¶Œí•œ ë ˆë²¨ë³„ ì•¡ì…˜ í†µê³„

ê° í•­ëª©ì„ ì²´ê³„ì ìœ¼ë¡œ êµ¬í˜„í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.

---

## ğŸ’¾ êµ¬í˜„ íŒŒì¼ ì €ì¥ ìœ„ì¹˜

**ë£¨íŠ¸ í´ë”**: `3_Backend_APIs/`

**íŒŒì¼ ê²½ë¡œ**:
```
3_Backend_APIs/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ admin/
â”‚           â””â”€â”€ action-logs/
â”‚               â”œâ”€â”€ route.ts
â”‚               â””â”€â”€ stats/
â”‚                   â””â”€â”€ route.ts
â””â”€â”€ lib/
    â””â”€â”€ admin/
        â””â”€â”€ activity-tracker.ts
```

**ì ˆëŒ€ ê²½ë¡œ ë³„ì¹­**: `@/` (ì˜ˆ: `import ... from '@/lib/admin/activity-tracker'`)

---

## ğŸ“ ì‘ì—… ì§€ì‹œì‚¬í•­

### 1. ì¤€ë¹„ ë‹¨ê³„

- í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ì‘ì—… ì‹œì‘
- í•„ìš”í•œ ë„êµ¬ í™•ì¸: TypeScript/Next.js API Routes/Supabase/Zod
- ì˜ì¡´ì„± ì‘ì—… ì™„ë£Œ í™•ì¸ (P4BA8)

### 2. êµ¬í˜„ ë‹¨ê³„

**Database ìŠ¤í‚¤ë§ˆ** (P2D1ì— ì¶”ê°€ í•„ìš”):
```sql
CREATE TABLE admin_actions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  admin_id UUID REFERENCES profiles(id),
  action_type VARCHAR(50) NOT NULL,
  target_type VARCHAR(50),
  target_id UUID,
  result VARCHAR(20), -- success, failure
  duration_ms INTEGER,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_admin_actions_admin ON admin_actions(admin_id);
CREATE INDEX idx_admin_actions_type ON admin_actions(action_type);
CREATE INDEX idx_admin_actions_created ON admin_actions(created_at DESC);
```

**API Endpoints**:
```typescript
GET /api/admin/action-logs - ì•¡ì…˜ ë¡œê·¸ ì¡°íšŒ
Query: {
  adminId?: string;
  actionType?: string;
  startDate?: string;
  endDate?: string;
  page?: number;
  limit?: number;
}

GET /api/admin/action-logs/stats - í†µê³„ ì¡°íšŒ
Query: {
  adminId?: string;
  startDate?: string;
  endDate?: string;
  groupBy: 'admin' | 'action_type' | 'date';
}
```

**í†µê³„ ì‘ë‹µ ì˜ˆì‹œ**:
```typescript
{
  totalActions: 1234,
  byAdmin: [
    { adminId: 'xxx', name: 'ê´€ë¦¬ì1', count: 500 },
    { adminId: 'yyy', name: 'ê´€ë¦¬ì2', count: 734 }
  ],
  byActionType: [
    { type: 'user_ban', count: 50 },
    { type: 'post_delete', count: 200 }
  ],
  byDate: [
    { date: '2025-11-01', count: 100 },
    { date: '2025-11-02', count: 150 }
  ]
}
```

### 3. ê²€ì¦ ë‹¨ê³„

- ì•¡ì…˜ ë¡œê·¸ ìë™ ê¸°ë¡
- í†µê³„ API ë™ì‘
- ê·¸ë£¹ë³„ ì§‘ê³„ í™•ì¸
- ì„±ëŠ¥ ìµœì í™” (ì¸ë±ìŠ¤)

### 4. ì™„ë£Œ ë‹¨ê³„

- ìƒì„±ëœ íŒŒì¼ ëª©ë¡ í™•ì¸
- PROJECT GRID ìƒíƒœ ì—…ë°ì´íŠ¸
- ë‹¤ìŒ ì˜ì¡´ ì‘ì—…ì— ì˜í–¥ í™•ì¸

---

## âœ… ì™„ë£Œ ê¸°ì¤€

- [ ] ì•¡ì…˜ ë¡œê·¸ ìë™ ê¸°ë¡
- [ ] í†µê³„ API ë™ì‘
- [ ] ê·¸ë£¹ë³„ ì§‘ê³„ í™•ì¸
- [ ] ì„±ëŠ¥ ìµœì í™” (ì¸ë±ìŠ¤)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] API í…ŒìŠ¤íŠ¸ í†µê³¼

---

**ì‘ì—…ì§€ì‹œì„œ ìƒì„±ì¼**: 2025-11-06
**PROJECT GRID Version**: v4.0
