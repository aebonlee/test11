# 작업지시서: P6O3

## 📋 기본 정보

- **작업 ID**: P6O3
- **업무명**: 모니터링 설정
- **Phase**: Phase 6
- **Area**: Operations (O)
- **서브 에이전트**: devops-engineer
- **작업 방식**: AI-Only

---

## 🎯 작업 목표

Sentry 에러 추적 + Google Analytics

---

## 🔧 사용 도구

```
[Claude 도구]
Read, Edit, Write, Grep, Glob, Bash

[기술 스택]
GitHub Actions, Vercel, Sentry

[전문 스킬]
ci-cd, deployment
```

**도구 설명**:
- **Claude 도구**: Claude Code의 기본 기능 (Read, Write, Edit, Bash, Glob, Grep 등)
- **기술 스택**: 프로젝트에 사용되는 프레임워크 및 라이브러리
- **전문 스킬**: Anthropic 빌트인 스킬 (.claude/skills/*.md 참조)

## 🔗 의존성 정보

**의존성 체인**: P6O2

이 작업을 시작하기 전에 다음 작업이 완료되어야 합니다: P6O2

---

## 📦 기대 결과물

**생성할 파일:**
1. `sentry.client.config.ts` - Sentry 클라이언트 설정
2. `sentry.server.config.ts` - Sentry 서버 설정
3. `lib/monitoring/analytics.ts` - Google Analytics 헬퍼
4. `app/layout.tsx` - GA 스크립트 추가 (수정)

**설치 필요 패키지:**
```bash
npm install @sentry/nextjs
npm install react-ga4
```

**Sentry 초기화:**
```typescript
Sentry.init({
  dsn: process.env.SENTRY_DSN,
  tracesSampleRate: 1.0,
  environment: process.env.NODE_ENV,
});
```

**Google Analytics 이벤트:**
- `page_view`: 페이지 조회
- `search`: 정치인 검색
- `post_create`: 게시글 작성
- `politician_favorite`: 정치인 즐겨찾기

**환경 변수:**
- `SENTRY_DSN`
- `NEXT_PUBLIC_GA_ID`

**구현해야 할 세부 항목**:

1. Sentry 프로젝트 생성 (sentry.io)
2. Sentry SDK 설정 (Next.js용 client/server 분리)
3. 에러 추적 설정 (자동 에러 캡처, 소스맵 업로드)
4. Google Analytics 설정 (GA4)
5. 사용자 이벤트 추적 (커스텀 이벤트)
6. 성능 모니터링 (트랜잭션 추적)
7. 에러 그룹핑 및 알림 설정

각 항목을 체계적으로 구현하고 테스트하세요.

---

## 💾 구현 파일 저장 위치

**루트 폴더**: `5_DevOps/`

**파일 경로**:
```
5_DevOps/
├── sentry.config.js
└── lib/
    └── monitoring/
        └── sentry.ts
```

**절대 경로 별칭**: `@/` (예: `import ... from '@/lib/monitoring/sentry'`)

---

## 📝 작업 지시사항

### 1. 준비 단계

- 프로젝트 루트 디렉토리에서 작업 시작
- 필요한 도구 확인: GitHub Actions/Vercel/Sentry
- 의존성 작업 완료 확인 (P6O2)

### 2. 구현 단계

**구현해야 할 세부 항목**:

1. Sentry 프로젝트 생성
2. Sentry SDK 설정 (Next.js)
3. 에러 추적 설정
4. Google Analytics 설정
5. 사용자 이벤트 추적
6. 성능 모니터링

각 항목을 체계적으로 구현하고 테스트하세요.

### 3. 검증 단계

- 작성한 코드의 정상 동작 확인
- 타입 체크 및 린트 통과
- 필요한 경우 단위 테스트 작성
- 코드 리뷰 준비

### 4. 완료 단계

- 생성된 파일 목록 확인
- PROJECT GRID 상태 업데이트
- 다음 의존 작업에 영향 확인

---

## ✅ 완료 기준

- [ ] 모니터링 설정 기능이 정상적으로 구현됨
- [ ] 기대 결과물이 모두 생성됨
- [ ] 코드가 정상적으로 빌드/실행됨
- [ ] 타입 체크 및 린트 통과
- [ ] PROJECT GRID 상태 업데이트 완료
- [ ] 에러 추적 확인
- [ ] Analytics 데이터 수집 확인

---

**작업지시서 생성일**: 2025-11-06
**PROJECT GRID Version**: v4.0
