# V30 비용 최적화 및 배분 변경

**작성일**: 2026-01-17
**버전**: V30

---

## 1. 배경: Claude 웹검색 비용 문제

### 문제 발생

김민석 데이터 350개 수집 시 **약 $100** 비용 발생

### 원인 분석

| 요소 | 원인 여부 | 설명 |
|---|---|---|
| 토큰 가격 | ❌ | 다른 AI와 비슷 |
| 토큰 사용량 | ❌ | 동일 |
| API 호출 횟수 | ⚠️ | 부분 원인 |
| **web_search 도구** | **✅** | **주요 원인** |

### Claude web_search 과금 구조

```python
# collect_v30.py 설정
tools=[{
    "type": "web_search_20250305",
    "name": "web_search",
    "max_uses": 15  # 매 API 호출마다 최대 15번 웹검색
}]
```

- **웹검색 1회당 약 $0.01 추가 과금**
- 토큰 비용과 별개로 청구
- 700회 API 호출 × 평균 10회 검색 = 7,000회 웹검색 = **$70~100**

---

## 2. AI별 웹검색 비용 비교

### API 웹검색 비용 비교표

| AI | 만든 회사 | 검색 엔진 | 웹검색 비용 | 비고 |
|---|---|---|---|---|
| **Gemini** | Google | Google Search 자체 보유 | **무료** | Google Search Grounding |
| **Perplexity** | Perplexity AI | 자체 검색 엔진 | **API 요금에 포함** | Sonar API |
| **Grok** | xAI (머스크) | X/Twitter 접근 | **무료** | 실시간 트윗 데이터 |
| **Claude** | Anthropic | ❌ 없음 | **검색당 $0.01** | web_search 도구 별도 과금 |
| **ChatGPT** | OpenAI | ❌ 없음 | **검색당 별도 과금** | Bing 연동 시 추가 비용 |

### Google(Gemini)의 강점

| 항목 | 설명 |
|---|---|
| 검색 인프라 | 세계 최대 검색 엔진 자체 보유 |
| 비용 | Gemini에 Google Search Grounding **무료** 제공 |
| 이유 | 자사 인프라 사용 → 외부 연동 비용 없음 |
| 데이터 품질 | Google 검색 색인 직접 활용 → 정확도 높음 |

### Claude 및 ChatGPT의 약점

| 항목 | 설명 |
|---|---|
| 검색 인프라 | 자체 검색 엔진 **없음** |
| 웹검색 방식 | 외부 검색 서비스 연동 필요 |
| 비용 구조 | 연동 비용이 **사용자에게 전가** |
| Claude | web_search 도구: **검색 1회당 $0.01** |
| ChatGPT | Bing 검색 연동: **별도 과금** |

### 구독 vs API 비용 차이

| 사용 방식 | Claude | ChatGPT |
|---|---|---|
| **웹 인터페이스** (claude.ai, chat.openai.com) | 구독료에 포함 ($20/월) | 구독료에 포함 ($20/월) |
| **API** | **검색당 $0.01 추가** | **별도 과금** |

**참고**: 구독 모델도 웹검색 시 사용량 한도가 더 빨리 소진됨

---

## 3. 결론: V30 배분 변경 (2026-01-19 최종)

### 핵심 원칙

```
수집 (Collection): 웹검색 비용 저렴한 AI 사용
평가 (Evaluation): 웹검색 없이 분석만 → 모든 AI 사용 가능
```

### 변경 전 (기존 V30)

```
Claude 35% + Gemini 35% + Perplexity 25% + Grok 5%
```

### 변경 1차 (2026-01-17)

```
Gemini 60% + Perplexity 30% + Grok 10% + Claude 0% (수집 제외)
```

### ⚠️ 변경 2차 (2026-01-19 최종) - Perplexity 제거

```
Gemini 90% + Grok 10% (Perplexity 완전 제거)
```

**Perplexity 제거 사유:**
- 401 Authorization Required 지속 발생
- 조은희 263개 수집 중: 6개 카테고리 과다수집, 4개 카테고리 완전 실패 (0개)
- 비용 폭탄: $1,050-$1,890/100명 ($10.50-$18.90/정치인)
- 불안정성으로 인한 수집 품질 문제

---

## 4. 최종 역할 분담

### 수집/평가 역할

| AI | 수집 | 평가 | 비고 |
|---|---|---|---|
| **Gemini** | ✅ | ✅ | 수집 + 평가 (뉴스 포함!) |
| **Grok** | ✅ | ✅ | 수집 + 평가 (X만) |
| ~~Perplexity~~ | ❌ | ❌ | 제거 (401 에러 + 비용 폭탄) |
| **Claude** | ❌ | ✅ | 평가만 (비용 문제로 수집 제외) |
| **ChatGPT** | ❌ | ✅ | 평가만 (비용 문제로 수집 제외) |

### 수집 배분 (카테고리당 100개)

| 데이터 타입 | Gemini | Grok | 합계 |
|---|---|---|---|
| Official 50개 | 50개 | 0개 | 50개 |
| Public 50개 | 40개 | 10개 | 50개 |
| **합계** | **90개** | **10개** | **100개** |

---

## 5. 플랫폼별 담당 AI (V30 최종 - Perplexity 제거)

### AI별 담당 소스 (PUBLIC 기준)

| AI | 담당 개수 | 담당 소스 | 금지 소스 |
|---|---|---|---|
| **Gemini** | 40개 | **뉴스 + SNS + 위키 + 블로그 + 커뮤니티** | ❌ X만 제외 |
| **Grok** | 10개 | X/트위터만 | ❌ 뉴스, ❌ 기타 |
| ~~Perplexity~~ | 0개 | 제거 | - |

### Gemini PUBLIC 담당 상세 (Perplexity 역할 흡수!)

| 소스 유형 | 구체적 예시 |
|---|---|
| **⚠️ 뉴스/언론** | 조선일보, 중앙일보, 동아일보, 한겨레, 경향신문, KBS, MBC, SBS, JTBC, 연합뉴스 등 |
| **SNS** | YouTube(영상, 인터뷰), Instagram, Facebook |
| **위키피디아** | 한글/영문 위키피디아 |
| **블로그/칼럼** | 네이버 블로그, 브런치, 전문가 칼럼 |
| **커뮤니티** | 나무위키, 네이버 카페, 클리앙 |

**⚠️ 중요 변경 (2026-01-19):**
- Gemini가 **Perplexity의 뉴스/언론 수집 역할을 흡수**
- 이전: 뉴스 제외 (Perplexity 전담)
- 현재: **뉴스 포함** (Gemini가 전부 담당)

### ~~Perplexity PUBLIC 담당~~ (제거)

```
⚠️ Perplexity 완전 제거됨
- 401 Authorization Required 지속 발생
- 수집 불안정 (과다수집 또는 완전 실패)
- 비용 폭탄: $1,050-$1,890/100명
- Gemini가 뉴스 수집 역할 흡수
```

### Grok PUBLIC 담당 상세

| 소스 유형 | 구체적 예시 |
|---|---|
| **X(트위터)** | 정치인 관련 트윗, 정치인 트윗에 대한 반응/댓글/인용 |

**참고**: Grok은 X/트위터 전담이며, 개별 트윗 URL 불필요 (출처: "X/@계정명")

### X(트위터) 배정 근거

| 지표 | 수치 | 출처 |
|---|---|---|
| 정치 콘텐츠 노출 | X 사용자 74%가 정치 콘텐츠 접함 | Pew Research |
| 정치 관련 트윗 | 미국 성인 트윗의 1/3(33%)이 정치 관련 | Pew Research |
| 정치 목적 사용 | 59%가 "정치 이슈 파악" 목적으로 X 사용 | Pew Research |

→ 정치 특수성 감안하여 Grok 10% 배정

### 금지 규칙 (V30 최종 - Perplexity 제거)

| AI | 담당 | 금지 사항 |
|---|---|---|
| **Gemini** | OFFICIAL 50개 + PUBLIC 40개 | ❌ X 수집만 금지 (나머지 전부 허용) |
| **Grok** | PUBLIC 10개 | ❌ X 제외 전부 금지 (오직 X만) |
| ~~Perplexity~~ | 제거 | 완전 제거 (401 에러 + 비용 폭탄) |
| **Claude** | 평가만 | ❌ 수집 금지 (웹검색 비용 $0.01/회) |
| **ChatGPT** | 평가만 | ❌ 수집 금지 (Bing 연동 비용) |

---

## 6. 수정 이력

### 1차 수정 (2026-01-17)

**목표**: Claude 웹검색 비용 제거

| 단계 | 대상 | 수정 내용 | 상태 |
|---|---|---|---|
| 1단계 | `V30_기본방침.md` | 60-30-10 배분 | ✅ 완료 |
| 2단계 | `collect_v30.py` | COLLECT_DISTRIBUTION 수정 | ✅ 완료 |
| 3단계 | 테스트 | 조은희 수집 검증 | ✅ 완료 |

**결과**: 비용 $14.05 → $4.80 (66% 절감)

### 2차 수정 (2026-01-19) - Perplexity 제거

**목표**: Perplexity 401 에러 + 비용 폭탄 해결

| 단계 | 대상 | 수정 내용 | 상태 |
|---|---|---|---|
| 1단계 | `collect_v30.py` | Perplexity 제거, Grok 우선 실행 | ✅ 완료 |
| 2단계 | `README.md` | 90-10 배분 업데이트 | ✅ 완료 |
| 3단계 | `V30_기본방침.md` | 90-10 배분 업데이트 | ✅ 완료 |
| 4단계 | `V30_비용최적화_배분변경.md` | Perplexity 제거 이력 추가 | ✅ 진행 중 |
| 5단계 | `V30_전체_프로세스_가이드.md` | 배분 비율 변경 | ⏳ 대기 |
| 6단계 | `instructions/*.md` (28개) | 카테고리별 지침 수정 | ⏳ 대기 |
| 7단계 | 테스트 | 김민석 재수집 검증 | ⏳ 대기 |

**예상 결과**: 비용 $4.80 → $3.30 (77% 절감)

---

## 7. 참고 자료

### 출처

- [Pew Research - Politics on Twitter](https://www.pewresearch.org/politics/2022/06/16/politics-on-twitter-one-third-of-tweets-from-u-s-adults-are-political/)
- [Pew Research - How Americans Navigate Politics](https://www.pewresearch.org/internet/2024/06/12/how-americans-navigate-politics-on-tiktok-x-facebook-and-instagram/)
- [The Social Depot - Google Indexing Social Posts](https://www.thesocialdepot.net/post/why-social-media-is-becoming-the-new-homepage)

---

**최종 업데이트**: 2026-01-17
