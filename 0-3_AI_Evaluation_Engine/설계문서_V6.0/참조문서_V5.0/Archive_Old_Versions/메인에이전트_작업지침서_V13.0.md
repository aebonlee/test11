# ë©”ì¸ ì—ì´ì „íŠ¸ ì‘ì—…ì§€ì¹¨ì„œ V13.0
## ì •ì¹˜ì¸ í‰ê°€ ì‹œìŠ¤í…œ - ì „ì²´ ì›Œí¬í”Œë¡œìš° ê´€ë¦¬

**ì‘ì„±ì¼**: 2025-11-11
**ë²„ì „**: V13.0
**ëŒ€ìƒ**: ë©”ì¸ ì—ì´ì „íŠ¸ (Claude Code ì¸ìŠ¤í„´ìŠ¤)
**ëª©í‘œ**: ì´ ë¬¸ì„œë§Œ ì½ê³ ë„ ì •ì¹˜ì¸ í‰ê°€ í”„ë¡œì íŠ¸ ì „ì²´ë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [V13.0 í•µì‹¬ ë³€ê²½ì‚¬í•­](#v130-í•µì‹¬-ë³€ê²½ì‚¬í•­)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°](#ë°ì´í„°ë² ì´ìŠ¤-ì—°ê²°)
5. [ì‘ì—… í”„ë¡œì„¸ìŠ¤](#ì‘ì—…-í”„ë¡œì„¸ìŠ¤)
6. [ë°ì´í„° ìˆ˜ì§‘ (ë³‘ë ¬)](#ë°ì´í„°-ìˆ˜ì§‘-ë³‘ë ¬)
7. [ë°ì´í„° ê²€ì¦](#ë°ì´í„°-ê²€ì¦)
8. [ì ìˆ˜ ê³„ì‚°](#ì ìˆ˜-ê³„ì‚°)
9. [ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸](#ì™„ë£Œ-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ã€í”„ë¡œì íŠ¸ ëª©í‘œã€‘
í•œêµ­ ì •ì¹˜ì¸ë“¤ì˜ 10ê°œ ì¹´í…Œê³ ë¦¬ ì—­ëŸ‰ì„ í‰ê°€í•˜ì—¬ ìµœì¢… ì ìˆ˜(400~1000)ì™€ ë“±ê¸‰(M~I) ë¶€ì—¬

### ã€10ê°œ í‰ê°€ ì¹´í…Œê³ ë¦¬ã€‘
```
1. ì „ë¬¸ì„± (Expertise)           - ì§ë¬´ ìˆ˜í–‰ ëŠ¥ë ¥, í•™ë ¥, ê²½ë ¥, ìê²©ì¦
2. ë¦¬ë”ì‹­ (Leadership)          - ì¡°ì§ ê´€ë¦¬, ëª©í‘œ ë‹¬ì„±, ì˜í–¥ë ¥
3. ë¹„ì „ (Vision)                - ë¯¸ë˜ ë°©í–¥ ì œì‹œ, ì¥ê¸° ê³„íš, í˜ì‹ 
4. ì²­ë ´ì„± (Integrity)           - ë¶€íŒ¨ ì—†ìŒ, ì‹ ë¢°ì„±, ë²•ì¤€ìˆ˜
5. ìœ¤ë¦¬ì„± (Ethics)              - ë„ë• ê¸°ì¤€, ê³µì •ì„±, ì±…ì„ê°
6. ì±…ì„ì„± (Accountability)      - ì•½ì† ì´í–‰, ê²°ê³¼ ì±…ì„, íˆ¬ëª…ì„±
7. íˆ¬ëª…ì„± (Transparency)        - ì •ë³´ ê³µê°œ, ì†Œí†µ, ë¬¸ì„œí™”
8. ì†Œí†µëŠ¥ë ¥ (Communication)     - ì„¤ë“ë ¥, ì–¸ë¡  í™œë™, ì ‘ê·¼ì„±
9. ëŒ€ì‘ì„± (Responsiveness)      - ì‹ ì†ì„±, ë¯¼ì› ì²˜ë¦¬, ìœ„ê¸° ëŒ€ì‘
10. ê³µìµì„± (PublicInterest)     - ê³µê³µ ì´ìµ, ì•½ì ë°°ë ¤, ê³µí—Œ
```

### ã€ìµœì¢… ì ìˆ˜ ê³„ì‚° (V13.0)ã€‘
```
ê³µì‹: ìµœì¢…ì ìˆ˜ = Category1ì ìˆ˜ + Category2ì ìˆ˜ + ... + Category10ì ìˆ˜
ì¹´í…Œê³ ë¦¬ ì ìˆ˜ = (6.5 + í‰ê· ë“±ê¸‰ Ã— 0.5) Ã— 10
ë²”ìœ„: 400 ~ 1,000ì 

ë“±ê¸‰ íŒì • (8ë‹¨ê³„ ê¸ˆì† ë“±ê¸‰):
I (Iridium):  900~1000ì 
B (Bronze):   800~899ì 
S (Silver):   700~799ì 
G (Gold):     600~699ì 
P (Platinum): 500~599ì 
E (Emerald):  450~499ì 
D (Diamond):  425~449ì 
M (Mithril):  400~424ì 
```

---

## V13.0 í•µì‹¬ ë³€ê²½ì‚¬í•­

### ã€V8.0 â†’ V13.0 ì£¼ìš” ë³€ê²½ã€‘

#### 1. ë“±ê¸‰ ë²”ìœ„ í™•ëŒ€
- **V8.0**: -5 ~ +5 (11ë‹¨ê³„)
- **V13.0**: -7 ~ +7 (15ë‹¨ê³„) âœ…

#### 2. ì•Œê³ ë¦¬ì¦˜ ë³€ê²½
- **V8.0**: (7.0 + í‰ê· ë“±ê¸‰ Ã— 0.6) Ã— 10
- **V13.0**: (6.5 + í‰ê· ë“±ê¸‰ Ã— 0.5) Ã— 10 âœ…

#### 3. ëª¨ë¸ ë³€ê²½ (ë¹„ìš© ì ˆê° 73%)
- **V8.0**: Claude Sonnet 4.5
- **V13.0**: Claude Haiku 3.5 (claude-3-5-haiku-20241022) âœ…

#### 4. ë³‘ë ¬ ì²˜ë¦¬ ìµœì í™”
- **V8.0**: 10ê°œ ë™ì‹œ (íƒ€ì„ì•„ì›ƒ ë°œìƒ)
- **V13.0**: 5ê°œì”© ë™ì‹œ (ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±) âœ…

#### 5. ì¬ìˆ˜ì§‘ ë¡œì§ ì¶”ê°€
- **V8.0**: 1íšŒ ìˆ˜ì§‘
- **V13.0**: 3ì°¨ ì‹œë„ (50ê°œ ë¯¸ë‹¬ ì‹œ ìë™ ì¬ìˆ˜ì§‘) âœ…

#### 6. ì¤‘ë³µ ë°©ì§€
- **V8.0**: ì—†ìŒ
- **V13.0**: ë‹¤ë¥¸ í‚¤ì›Œë“œ/ì¶œì²˜ ì‚¬ìš© (ì¬ìˆ˜ì§‘ ì‹œ) âœ…

#### 7. DB í…Œì´ë¸” êµ¬ì¡°
- **V8.0**: category_num (INTEGER)
- **V13.0**: category_name (TEXT: "Expertise", "Leadership" ë“±) âœ…

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ã€ê¸°ìˆ  ìŠ¤íƒã€‘
```
ë°ì´í„° ìˆ˜ì§‘:      Claude Haiku 3.5 (API ì§ì ‘ í˜¸ì¶œ)
ë°ì´í„° ì €ì¥:      Supabase PostgreSQL
ì ìˆ˜ ê³„ì‚°:        Python ìŠ¤í¬ë¦½íŠ¸
ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜:   main_orchestrator.py
```

### ã€ë°ì´í„° íë¦„ã€‘
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  1. ì •ì¹˜ì¸ ì •ë³´ ì…ë ¥ (politician_id, name)                 â”‚
â”‚     â†“                                                        â”‚
â”‚  2. main_orchestrator.py ì‹¤í–‰                               â”‚
â”‚     â†“                                                        â”‚
â”‚  3. data_collector_parallel.py í˜¸ì¶œ                         â”‚
â”‚     - 5ê°œì”© ë³‘ë ¬ ì²˜ë¦¬ (max_workers=5)                       â”‚
â”‚     - Claude Haiku API ì§ì ‘ í˜¸ì¶œ                            â”‚
â”‚     - ì¹´í…Œê³ ë¦¬ë‹¹ 50ê°œ ìˆ˜ì§‘                                  â”‚
â”‚     - 3ì°¨ ì‹œë„ (ë¯¸ë‹¬ ì‹œ ìë™ ì¬ìˆ˜ì§‘)                       â”‚
â”‚     â†“                                                        â”‚
â”‚  4. ê° í•­ëª©ì„ Supabase collected_data í…Œì´ë¸”ì— ì €ì¥        â”‚
â”‚     - category_name (TEXT)                                  â”‚
â”‚     - item_num (ìë™ ì¦ê°€)                                  â”‚
â”‚     - rating (-7 ~ +7)                                      â”‚
â”‚     â†“                                                        â”‚
â”‚  5. score_calculator.py í˜¸ì¶œ                                â”‚
â”‚     - ì¹´í…Œê³ ë¦¬ë³„ í‰ê·  ë“±ê¸‰ ê³„ì‚°                            â”‚
â”‚     - V13.0 ì•Œê³ ë¦¬ì¦˜ ì ìš©                                   â”‚
â”‚     - ìµœì¢… ì ìˆ˜ ë° ë“±ê¸‰ ê³„ì‚°                               â”‚
â”‚     â†“                                                        â”‚
â”‚  6. politicians í…Œì´ë¸” ì—…ë°ì´íŠ¸ (ìµœì¢… ì ìˆ˜ ì €ì¥)          â”‚
â”‚     â†“                                                        â”‚
â”‚  7. ì™„ë£Œ                                                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

### ã€Supabase ì—°ê²° ì •ë³´ã€‘
**íŒŒì¼ ìœ„ì¹˜**: `.env`

**í•„ìˆ˜ ì •ë³´**:
```
SUPABASE_URL=https://ooddlafwdpzgxfefgsrx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...
ANTHROPIC_API_KEY=sk-ant-...
```

### ã€í…Œì´ë¸” êµ¬ì¡°ã€‘

**1. politicians í…Œì´ë¸”**
```sql
- id: INTEGER (PK)
- name: TEXT
- party: TEXT
- position: TEXT
- position_type: TEXT
- region: TEXT
- status: TEXT
- final_score: DECIMAL
- grade: TEXT
```

**2. collected_data í…Œì´ë¸” (V13.0)**
```sql
- collected_data_id: INTEGER (PK)
- politician_id: INTEGER (FK â†’ politicians.id)
- ai_name: TEXT (ì˜ˆ: "Claude")
- category_name: TEXT (ì˜ˆ: "Expertise", "Leadership")
- item_num: INTEGER (ìë™ ì¦ê°€: 1, 2, 3, ...)
- data_title: TEXT
- data_content: TEXT
- data_source: TEXT
- source_url: TEXT (nullable)
- collection_date: DATE
- rating: INTEGER (-7 ~ +7)
- rating_rationale: TEXT
```

**âš ï¸ V8.0ê³¼ì˜ ì°¨ì´**:
- `category_num` (INTEGER) â†’ `category_name` (TEXT)
- `item_num`ì€ ê¸°ì¡´ ë°ì´í„° ê°œìˆ˜ í™•ì¸ í›„ ìë™ ì¦ê°€

### ã€ì—°ê²° í…ŒìŠ¤íŠ¸ã€‘
```bash
# Supabase ì—°ê²° í™•ì¸
python << 'EOF'
from dotenv import load_dotenv
import os
load_dotenv()
from supabase import create_client
supabase = create_client(os.getenv('SUPABASE_URL'), os.getenv('SUPABASE_SERVICE_ROLE_KEY'))
response = supabase.table('politicians').select('*').limit(1).execute()
print(f"âœ… ì—°ê²° ì„±ê³µ: {len(response.data)}ê°œ ë ˆì½”ë“œ")
EOF
```

---

## ì‘ì—… í”„ë¡œì„¸ìŠ¤

### ã€ì‹¤í–‰ ëª…ë ¹ì–´ã€‘

#### ì „ì²´ ìë™ í‰ê°€
```bash
cd 0-3_AI_Evaluation_Engine
python src/main_orchestrator.py --politician_id=1 --politician_name="ì˜¤ì„¸í›ˆ"
```

#### ê°œë³„ ë‹¨ê³„ ì‹¤í–‰
```bash
# 1. ë°ì´í„° ìˆ˜ì§‘ë§Œ
python src/data_collector_parallel.py --politician_id=1 --politician_name="ì˜¤ì„¸í›ˆ"

# 2. ì ìˆ˜ ê³„ì‚°ë§Œ
python src/score_calculator.py --politician_id=1 --politician_name="ì˜¤ì„¸í›ˆ"
```

---

### ã€Phase 1: ì¤€ë¹„ ë‹¨ê³„ã€‘

#### Step 1.1: ì •ì¹˜ì¸ ì •ë³´ í™•ì¸
```python
from supabase import create_client
import os

supabase = create_client(os.getenv('SUPABASE_URL'), os.getenv('SUPABASE_SERVICE_ROLE_KEY'))

# ì •ì¹˜ì¸ ì •ë³´ ì¡°íšŒ
response = supabase.table('politicians').select('*').eq('name', 'ì˜¤ì„¸í›ˆ').execute()
politician_id = response.data[0]['id']
print(f"ì •ì¹˜ì¸ ID: {politician_id}")
```

#### Step 1.2: ê¸°ì¡´ ë°ì´í„° í™•ì¸
```python
# í•´ë‹¹ ì •ì¹˜ì¸ì˜ ê¸°ì¡´ ë°ì´í„° í™•ì¸
response = supabase.table('collected_data')\
    .select('category_name')\
    .eq('politician_id', politician_id)\
    .execute()

# ì¹´í…Œê³ ë¦¬ë³„ ê°œìˆ˜
from collections import Counter
category_counts = Counter([d['category_name'] for d in response.data])
print("ê¸°ì¡´ ë°ì´í„°:")
for cat, count in category_counts.items():
    print(f"  {cat}: {count}ê°œ")
```

#### Step 1.3: í•„ìš”ì‹œ ê¸°ì¡´ ë°ì´í„° ì‚­ì œ
```python
# ì¬ì‘ì—… ì‹œì—ë§Œ ì‚­ì œ
if len(response.data) > 0:
    confirm = input("ê¸°ì¡´ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (yes/no): ")
    if confirm.lower() == 'yes':
        supabase.table('collected_data').delete()\
            .eq('politician_id', politician_id).execute()
        print("âœ… ê¸°ì¡´ ë°ì´í„° ì‚­ì œ ì™„ë£Œ")
```

---

## ë°ì´í„° ìˆ˜ì§‘ (ë³‘ë ¬)

### ã€ë³‘ë ¬ ì²˜ë¦¬ ì„¤ì •ã€‘

```python
# src/data_collector_parallel.py
from concurrent.futures import ThreadPoolExecutor

# âš ï¸ ì¤‘ìš”: 5ê°œì”© ë™ì‹œ ì²˜ë¦¬ (ë³€ê²½ ê¸ˆì§€)
# - 10ê°œ ë™ì‹œ ì‹œ API íƒ€ì„ì•„ì›ƒ ë°œìƒ í™•ì¸ë¨
# - ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±ì„ ìœ„í•´ 5ê°œë¡œ ì œí•œ
with ThreadPoolExecutor(max_workers=5) as executor:
    futures = {
        executor.submit(collect_category_data, politician_id, politician_name, cat_num): cat_num
        for cat_num in range(1, 11)
    }
```

### ã€ì¹´í…Œê³ ë¦¬ ë§¤í•‘ã€‘
```python
CATEGORY_MAP = {
    1: "Expertise",
    2: "Leadership",
    3: "Vision",
    4: "Integrity",
    5: "Ethics",
    6: "Accountability",
    7: "Transparency",
    8: "Communication",
    9: "Responsiveness",
    10: "PublicInterest"
}
```

### ã€ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤ã€‘

#### 1ì°¨ ì‹œë„
```
- ëª©í‘œ: ê° ì¹´í…Œê³ ë¦¬ 50ê°œ
- ê¸°ì¡´ ê°œìˆ˜ í™•ì¸
- ë¶€ì¡±ë¶„ë§Œ ìˆ˜ì§‘ (50 - ê¸°ì¡´ ê°œìˆ˜)
```

#### 2ì°¨ ì‹œë„ (1ì°¨ ì‹¤íŒ¨ ì‹œ)
```
- ì—¬ì „íˆ 50ê°œ ë¯¸ë‹¬ì¸ ì¹´í…Œê³ ë¦¬ë§Œ
- âš ï¸ ì¤‘ë³µ ë°©ì§€: ë‹¤ë¥¸ í‚¤ì›Œë“œ, ë‹¤ë¥¸ ì¶œì²˜ ì‚¬ìš©
- ë¶€ì¡±ë¶„ë§Œ ì¶”ê°€ ìˆ˜ì§‘
```

#### 3ì°¨ ì‹œë„ (2ì°¨ ì‹¤íŒ¨ ì‹œ)
```
- ìµœì¢… ì‹œë„
- âš ï¸ ì¤‘ë³µ ë°©ì§€: ë‹¤ë¥¸ í‚¤ì›Œë“œ, ë‹¤ë¥¸ ì¶œì²˜ ì‚¬ìš©
- ë¶€ì¡±ë¶„ë§Œ ì¶”ê°€ ìˆ˜ì§‘
```

### ã€ì‘ì—…ì§€ì‹œì„œ ì°¸ì¡°ã€‘
ê° ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ì§€ì¹¨:
```
instructions/category_1_expertise.md
instructions/category_2_leadership.md
instructions/category_3_vision.md
instructions/category_4_integrity.md
instructions/category_5_ethics.md
instructions/category_6_accountability.md
instructions/category_7_transparency.md
instructions/category_8_communication.md
instructions/category_9_responsiveness.md
instructions/category_10_publicinterest.md
```

### ã€DB ì €ì¥ í˜•ì‹ã€‘
```json
{
  "politician_id": 1,
  "ai_name": "Claude",
  "category_name": "Expertise",
  "item_num": 14,
  "data_title": "ì„œìš¸ëŒ€ ë„ì‹œê³µí•™ ë°•ì‚¬ í•™ìœ„ ë³´ìœ ",
  "data_content": "1985ë…„ ì„œìš¸ëŒ€í•™êµì—ì„œ ë„ì‹œê³µí•™ ë°•ì‚¬ í•™ìœ„ ì·¨ë“...",
  "data_source": "ì„œìš¸ëŒ€ ê³µì‹ í™ˆí˜ì´ì§€",
  "source_url": "https://example.com",
  "collection_date": "2025-11-11",
  "rating": 5,
  "rating_rationale": "ë†’ì€ í•™ë ¥ê³¼ ì „ë¬¸ì„±ì„ ì…ì¦í•˜ëŠ” ê³µì‹ í•™ìœ„"
}
```

**ì¤‘ìš”**:
- âœ… 50ê°œì”© ì €ì¥ (ì¹´í…Œê³ ë¦¬ë‹¹)
- âœ… item_num ìë™ ì¦ê°€ (ê¸°ì¡´ max + 1)
- âœ… category_name (TEXT) ì‚¬ìš©
- âœ… rating: -7 ~ +7

---

## ë°ì´í„° ê²€ì¦

### ã€ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ã€‘

#### Step 1: ì´ ë ˆì½”ë“œ í™•ì¸
```python
response = supabase.table('collected_data')\
    .select('*')\
    .eq('politician_id', politician_id)\
    .execute()

total_records = len(response.data)
print(f"ì´ ìˆ˜ì§‘ ë ˆì½”ë“œ: {total_records}ê°œ")

# ê¸°ì¤€: 500ê°œ (10 Ã— 50ê°œ)
if total_records >= 500:
    print("âœ… ìˆ˜ì§‘ ê°œìˆ˜ ì¶©ë¶„")
else:
    print(f"âŒ ë¶€ì¡± ({total_records}ê°œ, í•„ìš”: 500ê°œ)")
```

#### Step 2: ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬ í™•ì¸
```python
from collections import Counter

category_counts = Counter([d['category_name'] for d in response.data])

print("ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬:")
for cat_name in ["Expertise", "Leadership", "Vision", "Integrity", "Ethics",
                  "Accountability", "Transparency", "Communication", "Responsiveness", "PublicInterest"]:
    count = category_counts.get(cat_name, 0)
    status = 'âœ…' if count >= 50 else 'âŒ'
    print(f"  {cat_name:15s}: {count:3d}ê°œ {status}")
```

#### Step 3: ë“±ê¸‰ ë¶„í¬ í™•ì¸
```python
rating_dist = Counter([d['rating'] for d in response.data])

print("ë“±ê¸‰ ë¶„í¬:")
for rating in range(-7, 8):
    count = rating_dist.get(rating, 0)
    percentage = (count / len(response.data)) * 100 if len(response.data) > 0 else 0
    print(f"  Rating {rating:+2d}: {count:3d}ê°œ ({percentage:5.1f}%)")
```

#### Step 4: í‚¤ì›Œë“œ ë¹„ìœ¨ í™•ì¸
```python
positive_keywords = ['ì„±ê³µ', 'ìš°ìˆ˜', '1ìœ„', 'ìµœê³ ', 'ê°œì„ ', 'ì„±ê³¼', 'ë‹¬ì„±', 'ì™„ìˆ˜']
negative_keywords = ['ë¶€íŒ¨', 'ë¹„ë¦¬', 'ì‹¤íŒ¨', 'ë¬¸ì œ', 'ë…¼ë€', 'ê¸°ì†Œ', 'ë¹„íŒ', 'ì˜í˜¹']

positive_count = 0
negative_count = 0

for record in response.data:
    content = record['data_content']
    title = record['data_title']

    for keyword in positive_keywords:
        if keyword in content or keyword in title:
            positive_count += 1
            break

    for keyword in negative_keywords:
        if keyword in content or keyword in title:
            negative_count += 1
            break

total = len(response.data)
pos_ratio = (positive_count / total) * 100
neg_ratio = (negative_count / total) * 100

print(f"ê¸ì • í‚¤ì›Œë“œ: {positive_count}ê°œ ({pos_ratio:.1f}%) {'âœ…' if pos_ratio >= 20 else 'âš ï¸'}")
print(f"ë¶€ì • í‚¤ì›Œë“œ: {negative_count}ê°œ ({neg_ratio:.1f}%) {'âœ…' if neg_ratio >= 20 else 'âš ï¸'}")
```

---

## ì ìˆ˜ ê³„ì‚°

### ã€V13.0 ì•Œê³ ë¦¬ì¦˜ã€‘

```python
# src/score_calculator.py

PRIOR = 6.5
COEFFICIENT = 0.5

# 1. ì¹´í…Œê³ ë¦¬ë³„ í‰ê·  ë“±ê¸‰ ê³„ì‚°
category_ratings = {}
for record in response.data:
    cat_name = record['category_name']
    if cat_name not in category_ratings:
        category_ratings[cat_name] = []
    category_ratings[cat_name].append(record['rating'])

# 2. ì¹´í…Œê³ ë¦¬ë³„ í‰ê· 
category_averages = {}
for cat_name, ratings in category_ratings.items():
    avg = sum(ratings) / len(ratings)
    category_averages[cat_name] = avg

# 3. V13.0 ì•Œê³ ë¦¬ì¦˜: ì¹´í…Œê³ ë¦¬ ì ìˆ˜ = (6.5 + í‰ê· ë“±ê¸‰ Ã— 0.5) Ã— 10
category_scores = {}
total_score = 0

for cat_name, avg in sorted(category_averages.items()):
    score = (PRIOR + (avg * COEFFICIENT)) * 10
    category_scores[cat_name] = score
    total_score += score

print("\nì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜:")
for cat_name in sorted(category_scores.keys()):
    avg = category_averages[cat_name]
    score = category_scores[cat_name]
    print(f"  {cat_name:15s}: í‰ê·  {avg:+5.2f} â†’ ì ìˆ˜ {score:6.1f}")

print(f"\nìµœì¢… ì ìˆ˜: {total_score:.1f} / 1,000.0ì ")
```

### ã€ë“±ê¸‰ íŒì • (8ë‹¨ê³„ ê¸ˆì† ë“±ê¸‰)ã€‘
```python
def get_grade(score):
    if 900 <= score <= 1000:
        return 'I'  # Iridium
    elif 800 <= score < 900:
        return 'B'  # Bronze
    elif 700 <= score < 800:
        return 'S'  # Silver
    elif 600 <= score < 700:
        return 'G'  # Gold
    elif 500 <= score < 600:
        return 'P'  # Platinum
    elif 450 <= score < 500:
        return 'E'  # Emerald
    elif 425 <= score < 450:
        return 'D'  # Diamond
    else:  # 400 <= score < 425
        return 'M'  # Mithril

final_grade = get_grade(total_score)
print(f"ìµœì¢… ë“±ê¸‰: {final_grade} Grade")
```

### ã€DB ì—…ë°ì´íŠ¸ã€‘
```python
# politicians í…Œì´ë¸”ì— ìµœì¢… ì ìˆ˜ ì €ì¥
supabase.table('politicians').update({
    'final_score': total_score,
    'grade': final_grade
}).eq('id', politician_id).execute()

print(f"âœ… DB ì—…ë°ì´íŠ¸ ì™„ë£Œ (politician_id={politician_id})")
```

---

## ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ã€ì „ì²´ ì‘ì—… ì™„ë£Œ ê¸°ì¤€ã€‘

```
â–¡ Phase 1: ì¤€ë¹„ ë‹¨ê³„
  â–¡ ì •ì¹˜ì¸ ì •ë³´ í™•ì¸
  â–¡ politician_id í™•ì¸
  â–¡ ê¸°ì¡´ ë°ì´í„° í™•ì¸/ì‚­ì œ (í•„ìš” ì‹œ)

â–¡ Phase 2: ë°ì´í„° ìˆ˜ì§‘
  â–¡ main_orchestrator.py ì‹¤í–‰
  â–¡ data_collector_parallel.py ìë™ í˜¸ì¶œ
  â–¡ 5ê°œì”© ë³‘ë ¬ ì²˜ë¦¬ í™•ì¸
  â–¡ 3ì°¨ ì‹œë„ ë¡œì§ ì‘ë™ í™•ì¸
  â–¡ ê° ì¹´í…Œê³ ë¦¬ 50ê°œ ë‹¬ì„± í™•ì¸

â–¡ Phase 3: ë°ì´í„° ì €ì¥
  â–¡ Supabase collected_data í…Œì´ë¸” ì €ì¥
  â–¡ ì´ 500ê°œ ë ˆì½”ë“œ í™•ì¸ (10 Ã— 50ê°œ)
  â–¡ category_name (TEXT) ì‚¬ìš© í™•ì¸
  â–¡ item_num ìë™ ì¦ê°€ í™•ì¸

â–¡ Phase 4: ë°ì´í„° ê²€ì¦
  â–¡ ë ˆì½”ë“œ ê°œìˆ˜ í™•ì¸ (500ê°œ)
  â–¡ ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬ í™•ì¸ (ê° 50ê°œ)
  â–¡ ë“±ê¸‰ ë¶„í¬ í™•ì¸ (-7 ~ +7)
  â–¡ í‚¤ì›Œë“œ ë¹„ìœ¨ í™•ì¸ (ê¸ì •/ë¶€ì • ê° 20% ì´ìƒ)

â–¡ Phase 5: ì ìˆ˜ ê³„ì‚°
  â–¡ score_calculator.py ìë™ í˜¸ì¶œ
  â–¡ V13.0 ì•Œê³ ë¦¬ì¦˜ ì ìš© í™•ì¸
  â–¡ ìµœì¢… ì ìˆ˜ ì‚°ì¶œ (400~1000ì )
  â–¡ ë“±ê¸‰ ë¶€ì—¬ (M~I)
  â–¡ DB ì—…ë°ì´íŠ¸ í™•ì¸

â–¡ ìµœì¢… í™•ì¸
  â–¡ politicians í…Œì´ë¸”ì— ì ìˆ˜ ì €ì¥ í™•ì¸
  â–¡ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê²°ê³¼ í‘œì‹œ í™•ì¸
```

---

## ë¬¸ì œ í•´ê²°

### ã€ì¼ë°˜ì ì¸ ë¬¸ì œ ë° í•´ê²°ã€‘

#### ë¬¸ì œ 1: API íƒ€ì„ì•„ì›ƒ
**ì›ì¸**: 10ê°œ ë™ì‹œ ì²˜ë¦¬ ì‹œ ë„¤íŠ¸ì›Œí¬ ë³‘ëª©
**í•´ê²°**: max_workers=5 ìœ ì§€ (ë³€ê²½ ê¸ˆì§€)

#### ë¬¸ì œ 2: JSON íŒŒì‹± ì—ëŸ¬
**ì›ì¸**: Claude API ì‘ë‹µì— ì£¼ì„(//), +ê¸°í˜¸, trailing comma í¬í•¨
**í•´ê²°**: ì½”ë“œì—ì„œ ìë™ ì œê±° (ì •ê·œí‘œí˜„ì‹ ì²˜ë¦¬)
```python
json_str = re.sub(r'//[^\n]*\n', '\n', json_str)  # ì£¼ì„ ì œê±°
json_str = re.sub(r'"rating":\s*\+(\d+)', r'"rating": \1', json_str)  # +ê¸°í˜¸ ì œê±°
json_str = re.sub(r',(\s*[\]}])', r'\1', json_str)  # trailing comma ì œê±°
```

#### ë¬¸ì œ 3: ì¹´í…Œê³ ë¦¬ë‹¹ 50ê°œ ë¯¸ë‹¬
**ì›ì¸**: 1ì°¨ ìˆ˜ì§‘ë§Œìœ¼ë¡œ ë¶€ì¡±
**í•´ê²°**: 3ì°¨ ì‹œë„ ë¡œì§ ìë™ ì‘ë™ (ì½”ë“œì— ë‚´ì¥)

#### ë¬¸ì œ 4: ì¤‘ë³µ ë°ì´í„°
**ì›ì¸**: ì¬ìˆ˜ì§‘ ì‹œ ê°™ì€ í‚¤ì›Œë“œ ì‚¬ìš©
**í•´ê²°**: instructions/ íŒŒì¼ì˜ "ë‹¤ë¥¸ í‚¤ì›Œë“œ/ì¶œì²˜ ì‚¬ìš©" ì§€ì¹¨ ì¤€ìˆ˜

#### ë¬¸ì œ 5: Supabase ì—°ê²° ì‹¤íŒ¨
**í•´ê²°**:
1. .env íŒŒì¼ì— SUPABASE_SERVICE_ROLE_KEY í™•ì¸
2. ì¸í„°ë„· ì—°ê²° í™•ì¸
3. Supabase í”„ë¡œì íŠ¸ í™œì„± ìƒíƒœ í™•ì¸

---

## ì°¸ê³  ìë£Œ

### ã€í•µì‹¬ ë¬¸ì„œã€‘
```
ğŸ“ ì„¤ê³„ë¬¸ì„œ_V5.0/
  â”œâ”€â”€ README.md                                    (V13.0 ê°œìš”)
  â”œâ”€â”€ V13.0_ì‘ì—…ì§€ì‹œì„œ_ì „ì²´_10ê°œì¹´í…Œê³ ë¦¬.md       (ì„œë¸Œ ì—ì´ì „íŠ¸ìš©)
  â”œâ”€â”€ V13.0_ì ìˆ˜ê³„ì‚°_ì•Œê³ ë¦¬ì¦˜_FINAL.md            (ì•Œê³ ë¦¬ì¦˜ ìƒì„¸)
  â”œâ”€â”€ ìë™í™”_ì•„í‚¤í…ì²˜_ì„¤ê³„ì„œ.md                   (ì‹œìŠ¤í…œ êµ¬ì¡°)
  â””â”€â”€ ë©”ì¸ì—ì´ì „íŠ¸_ì‘ì—…ì§€ì¹¨ì„œ_V13.0.md            (ì´ íŒŒì¼)

ğŸ“ instructions/
  â”œâ”€â”€ category_1_expertise.md
  â”œâ”€â”€ category_2_leadership.md
  â””â”€â”€ ... (10ê°œ ì¹´í…Œê³ ë¦¬ ì‘ì—…ì§€ì‹œì„œ)

ğŸ“ src/
  â”œâ”€â”€ main_orchestrator.py                         (ì „ì²´ ì¡°ìœ¨)
  â”œâ”€â”€ data_collector_parallel.py                   (ë°ì´í„° ìˆ˜ì§‘)
  â””â”€â”€ score_calculator.py                          (ì ìˆ˜ ê³„ì‚°)
```

### ã€Python í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ã€‘
```bash
pip install anthropic==0.40.0
pip install supabase==2.3.4
pip install python-dotenv==1.0.0
```

### ã€í™˜ê²½ ë³€ìˆ˜ (.env)ã€‘
```bash
SUPABASE_URL=https://ooddlafwdpzgxfefgsrx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...
ANTHROPIC_API_KEY=sk-ant-...
```

---

## ì‹¤í–‰ ì˜ˆì‹œ

### ã€ì„±ê³µ ì¼€ì´ìŠ¤ã€‘
```bash
$ python src/main_orchestrator.py --politician_id=1 --politician_name="ì˜¤ì„¸í›ˆ"

============================================================
ğŸš€ ì •ì¹˜ì¸ í‰ê°€ ì‹œì‘: ì˜¤ì„¸í›ˆ (ID: 1)
============================================================

============================================================
ğŸ“Š STEP 1: ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘
============================================================

============================================================
ğŸ”„ 1ì°¨ ì‹œë„ ì‹œì‘
============================================================

  [1/10] ì¹´í…Œê³ ë¦¬ 1 - 1ì°¨ ì‹œë„ (ê¸°ì¡´: 0ê°œ, í•„ìš”: 50ê°œ)
  [2/10] ì¹´í…Œê³ ë¦¬ 2 - 1ì°¨ ì‹œë„ (ê¸°ì¡´: 0ê°œ, í•„ìš”: 50ê°œ)
  ...
  âœ… ì¹´í…Œê³ ë¦¬ 1 - 1ì°¨ ì™„ë£Œ (ì¶”ê°€: 48ê°œ, í•©ê³„: 48ê°œ)
  âœ… ì¹´í…Œê³ ë¦¬ 2 - 1ì°¨ ì™„ë£Œ (ì¶”ê°€: 50ê°œ, í•©ê³„: 50ê°œ)
  ...

============================================================
ğŸ”„ 2ì°¨ ì‹œë„ ì‹œì‘
============================================================

  [1/10] ì¹´í…Œê³ ë¦¬ 1 - 2ì°¨ ì‹œë„ (ê¸°ì¡´: 48ê°œ, í•„ìš”: 2ê°œ)
  âœ… ì¹´í…Œê³ ë¦¬ 2 ì´ë¯¸ 50ê°œ ë‹¬ì„± (50ê°œ)
  ...
  âœ… ì¹´í…Œê³ ë¦¬ 1 - 2ì°¨ ì™„ë£Œ (ì¶”ê°€: 2ê°œ, í•©ê³„: 50ê°œ)

============================================================
âœ… ëª¨ë“  ì¹´í…Œê³ ë¦¬ 50ê°œ ë‹¬ì„±!
============================================================

============================================================
ğŸ§® STEP 2: ì ìˆ˜ ê³„ì‚° ì‹œì‘
============================================================

ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜:
  Accountability : í‰ê·  +1.20 â†’ ì ìˆ˜   71.0
  Communication  : í‰ê·  +0.80 â†’ ì ìˆ˜   69.0
  Ethics         : í‰ê·  +1.50 â†’ ì ìˆ˜   72.5
  Expertise      : í‰ê·  +2.00 â†’ ì ìˆ˜   75.0
  Integrity      : í‰ê·  +1.00 â†’ ì ìˆ˜   70.0
  Leadership     : í‰ê·  +1.30 â†’ ì ìˆ˜   71.5
  PublicInterest : í‰ê·  +0.90 â†’ ì ìˆ˜   69.5
  Responsiveness : í‰ê·  +0.70 â†’ ì ìˆ˜   68.5
  Transparency   : í‰ê·  +1.10 â†’ ì ìˆ˜   70.5
  Vision         : í‰ê·  +1.40 â†’ ì ìˆ˜   72.0

ìµœì¢… ì ìˆ˜: 709.5 / 1,000.0ì 
ìµœì¢… ë“±ê¸‰: S Grade

============================================================
âœ… ì •ì¹˜ì¸ í‰ê°€ ì™„ë£Œ: ì˜¤ì„¸í›ˆ
============================================================
```

---

**ë¬¸ì„œ ë²„ì „**: V13.0
**ë§ˆì§€ë§‰ ìˆ˜ì •**: 2025-11-11
**ì‘ì„±ì**: Claude Code (Main Agent)
**ìŠ¹ì¸**: ì™„ë£Œ
