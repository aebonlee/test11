# ìƒì„¸í‰ê°€ë³´ê³ ì„œ ìƒì„± ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-11-14
**ë²„ì „**: V15.0
**ëª©ì **: ì •ì¹˜ì¸ AI í‰ê°€ ê²°ê³¼ë¥¼ ì¢…í•©í•œ ìƒì„¸ ë³´ê³ ì„œ ìƒì„±

---

## ğŸ“Š ë³´ê³ ì„œ ë°ì´í„° êµ¬ì¡°

### 3ê°œ í…Œì´ë¸” ì¡°ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   politicians    â”‚  â† 1. ê¸°ë³¸ ì •ë³´
â”‚  - ì´ë¦„, ì‚¬ì§„     â”‚     ì •ë‹¹, ì§ìœ„, ì§€ì—­êµ¬
â”‚  - ìƒë…„ì›”ì¼, í•™ë ¥ â”‚     ê²½ë ¥, ì—°ë½ì²˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ JOIN (politician_id)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ politician_scoresâ”‚  â† 2. ì¢…í•© ì ìˆ˜
â”‚  - ìµœì¢… ì ìˆ˜      â”‚     ë“±ê¸‰ (I/B/S/G/P/E/D/M)
â”‚  - ì¹´í…Œê³ ë¦¬ ì ìˆ˜  â”‚     10ê°œ ì ìˆ˜ (30~110ì )
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ JOIN (politician_id)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ collected_data   â”‚  â† 3. ìƒì„¸ í‰ê°€ ë°ì´í„°
â”‚  - 500ê°œ ë°ì´í„°   â”‚     ì¹´í…Œê³ ë¦¬ë³„ 50ê°œ
â”‚  - ì œëª©, ë‚´ìš©     â”‚     ì¶œì²˜, Rating, ê·¼ê±°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“„ ë³´ê³ ì„œ êµ¬ì„± ìš”ì†Œ

### 1ë¶€: ì¢…í•© ê°œìš”

```markdown
# ì˜¤ì„¸í›ˆ ì¢…í•© í‰ê°€ ë³´ê³ ì„œ

**í‰ê°€ ë²„ì „**: V15.0
**í‰ê°€ ì¼ì**: 2025-11-14
**ì´ ë°ì´í„° ìˆ˜**: 500ê°œ (OFFICIAL 60% + PUBLIC 40%)

## ì¢…í•© ì ìˆ˜

- **ìµœì¢… ì ìˆ˜**: 742ì  / 1,000ì 
- **ë“±ê¸‰**: S (Silver)
- **í‰ê°€**: ë§¤ìš° ìš°ìˆ˜í•œ ë¦¬ë”ì‹­

### ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜ (10ê°œ)

| ì¹´í…Œê³ ë¦¬ | ì ìˆ˜ | í‰ê·  Rating | í‰ê°€ |
|---------|------|------------|------|
| 1. ì „ë¬¸ì„± (Expertise) | 75.0 | +3.0 | ìš°ìˆ˜ |
| 2. ë¦¬ë”ì‹­ (Leadership) | 72.5 | +2.5 | ìš°ìˆ˜ |
| 3. ë¹„ì „ (Vision) | 70.0 | +2.0 | ì–‘í˜¸ |
| 4. ì²­ë ´ì„± (Integrity) | 68.0 | +1.6 | ì–‘í˜¸ |
| 5. ìœ¤ë¦¬ì„± (Ethics) | 65.0 | +1.0 | ì–‘í˜¸ |
| 6. ì±…ì„ì„± (Accountability) | 63.0 | +0.6 | ë³´í†µ |
| 7. íˆ¬ëª…ì„± (Transparency) | 60.0 | 0.0 | ë³´í†µ |
| 8. ì†Œí†µëŠ¥ë ¥ (Communication) | 58.0 | -0.4 | ë³´í†µ |
| 9. ëŒ€ì‘ì„± (Responsiveness) | 55.0 | -1.0 | ë¯¸í¡ |
| 10. ê³µìµì„± (PublicInterest) | 52.0 | -1.6 | ë¯¸í¡ |

**í•©ê³„**: 638.5ì  (ì´ë¡ ì ) â†’ 638.5ì  (ìµœì¢…)
```

### 2ë¶€: ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ í‰ê°€

```markdown
## ì¹´í…Œê³ ë¦¬ 1: ì „ë¬¸ì„± (Expertise)

**ì ìˆ˜**: 75.0ì  / 110ì 
**í‰ê·  Rating**: +3.0 / 10
**ìˆ˜ì§‘ ë°ì´í„°**: 50ê°œ (OFFICIAL 30ê°œ, PUBLIC 20ê°œ)

### ê¸ì • í‰ê°€ (Rating +5 ì´ìƒ)

#### [1] ë„ì‹œê³„íš ì „ë¬¸ê°€ ìê²© ë³´ìœ  (Rating: +7)
- **ë‚´ìš©**: ì„œìš¸ëŒ€í•™êµ ë„ì‹œê³µí•™ ë°•ì‚¬ í•™ìœ„ ë³´ìœ . 20ë…„ê°„ ë„ì‹œê³„íš ë¶„ì•¼ ì¢…ì‚¬.
- **ì¶œì²˜**: ì„œìš¸ì‹œ ê³µì‹ í™ˆí˜ì´ì§€
- **ì¶œì²˜ ìœ í˜•**: OFFICIAL
- **Rating ê·¼ê±°**: ë†’ì€ í•™ë ¥ê³¼ ì¥ê¸°ê°„ì˜ ì „ë¬¸ ê²½ë ¥ì´ ì¸ì •ë¨. ë„ì‹œ í–‰ì •ì— í•„ìš”í•œ ì „ë¬¸ì„± ë³´ìœ .

#### [2] í–‰ì • ê²½í—˜ í’ë¶€ (Rating: +6)
- **ë‚´ìš©**: ì„œìš¸ì‹œ ë¶€ì‹œì¥ ì—­ì„. ì¤‘ì•™ì •ë¶€ ê¸°íšì¬ì •ë¶€ ê·¼ë¬´ ê²½ë ¥.
- **ì¶œì²˜**: ì¤‘ì•™ì„ ê±°ê´€ë¦¬ìœ„ì›íšŒ ê³µì‹ ìë£Œ
- **ì¶œì²˜ ìœ í˜•**: OFFICIAL
- **Rating ê·¼ê±°**: ë‹¤ì–‘í•œ í–‰ì • ê²½í—˜ì´ ì •ì¹˜ ë¦¬ë”ì‹­ì— ê¸ì •ì  ì˜í–¥.

#### [3] êµ­ì œ ë„ì‹œ ì „ë¬¸ê°€ ì¸ì¦ (Rating: +5)
- **ë‚´ìš©**: UN-Habitat ë„ì‹œ ì „ë¬¸ê°€ ì¸ì¦ íšë“. êµ­ì œ ë„ì‹œê³„íš ì»¨í¼ëŸ°ìŠ¤ ë°œí‘œ ê²½ë ¥.
- **ì¶œì²˜**: UN-Habitat ê³µì‹ ì›¹ì‚¬ì´íŠ¸
- **ì¶œì²˜ ìœ í˜•**: OFFICIAL
- **Rating ê·¼ê±°**: êµ­ì œì  ìˆ˜ì¤€ì˜ ì „ë¬¸ì„± ì¸ì •.

### ì¤‘ë¦½ í‰ê°€ (Rating -2 ~ +2)

#### [1] ì¼ë¶€ ì •ì±… ì‹¤íŒ¨ ì‚¬ë¡€ ì¡´ì¬ (Rating: 0)
- **ë‚´ìš©**: 2022ë…„ êµí†µ ì •ì±… ì¼ë¶€ ì‹¤íš¨ì„± ë…¼ë€.
- **ì¶œì²˜**: ì„œìš¸ì‹ ë¬¸
- **ì¶œì²˜ ìœ í˜•**: PUBLIC
- **Rating ê·¼ê±°**: ê¸ì •ê³¼ ë¶€ì •ì´ í˜¼ì¬ëœ í‰ê°€.

### ë¶€ì • í‰ê°€ (Rating -3 ì´í•˜)

#### [1] ì „ë¬¸ì„± ì˜ë¬¸ ì œê¸° (Rating: -4)
- **ë‚´ìš©**: ì¼ë¶€ ì „ë¬¸ê°€ë“¤ì´ íŠ¹ì • ì •ì±…ì˜ ì „ë¬¸ì„± ë¶€ì¡± ì§€ì .
- **ì¶œì²˜**: OOì¼ë³´
- **ì¶œì²˜ ìœ í˜•**: PUBLIC
- **Rating ê·¼ê±°**: ì „ë¬¸ê°€ ì§‘ë‹¨ì˜ ë¹„íŒì  ì˜ê²¬ ì¡´ì¬.

---

## ì¹´í…Œê³ ë¦¬ 2: ë¦¬ë”ì‹­ (Leadership)

(ë™ì¼í•œ í˜•ì‹ìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ 2~10 ë°˜ë³µ)
```

### 3ë¶€: ì¶œì²˜ ë¶„ì„

```markdown
## ë°ì´í„° ì¶œì²˜ ë¶„ì„

### ì¶œì²˜ ìœ í˜•ë³„ ë¶„í¬

| ì¶œì²˜ ìœ í˜• | ë°ì´í„° ìˆ˜ | ë¹„ìœ¨ | ê¸°ì¤€ |
|----------|---------|------|------|
| **OFFICIAL (ê³µì‹)** | 300ê°œ | 60% | âœ… ê¸°ì¤€ ì¶©ì¡± |
| **PUBLIC (ê³µê°œ)** | 200ê°œ | 40% | âœ… ê¸°ì¤€ ì¶©ì¡± |
| **í•©ê³„** | 500ê°œ | 100% | - |

### OFFICIAL ì¶œì²˜ ìƒì„¸

- ì •ë¶€/ê³µê³µê¸°ê´€ ë°œí‘œ: 120ê°œ
- êµ­íšŒ/ì§€ë°©ì˜íšŒ ê³µì‹ ê¸°ë¡: 80ê°œ
- ë²•ì› íŒê²°ë¬¸/ê²€ì°° ê¸°ì†Œì¥: 40ê°œ
- ì„ ê±°ê´€ë¦¬ìœ„ì›íšŒ ìë£Œ: 30ê°œ
- ì •ë¶€ í†µê³„/ë³´ê³ ì„œ: 30ê°œ

### PUBLIC ì¶œì²˜ ìƒì„¸

- ì–¸ë¡  ë³´ë„: 120ê°œ
- ì‹œë¯¼ë‹¨ì²´ ë³´ê³ ì„œ: 40ê°œ
- í•™ìˆ  ë…¼ë¬¸/ì—°êµ¬: 30ê°œ
- SNS ê³µì‹ ê³„ì •: 10ê°œ

### ì¶œì²˜ ì‹ ë¢°ë„ í‰ê°€

- í‰ê·  ì‹ ë¢°ë„: 85%
- OFFICIAL ì¶œì²˜ ì‹ ë¢°ë„: 95%
- PUBLIC ì¶œì²˜ ì‹ ë¢°ë„: 70%
```

---

## ğŸ” ë³´ê³ ì„œ ìƒì„± SQL ì¿¼ë¦¬

### ì „ì²´ ë°ì´í„° ì¡°íšŒ

```sql
-- ì •ì¹˜ì¸ ì¢…í•© í‰ê°€ ë°ì´í„° ì¡°íšŒ
SELECT
  -- 1. ê¸°ë³¸ ì •ë³´ (politicians)
  p.name AS politician_name,
  p.party,
  p.position,
  p.region,
  p.profile_image_url,
  p.birth_date,
  p.education,

  -- 2. ì¢…í•© ì ìˆ˜ (politician_scores)
  ps.final_score,
  ps.raw_final_score,
  ps.grade,
  ps.category_1_score,
  ps.category_1_avg_rating,
  ps.category_2_score,
  ps.category_2_avg_rating,
  ps.category_3_score,
  ps.category_3_avg_rating,
  ps.category_4_score,
  ps.category_4_avg_rating,
  ps.category_5_score,
  ps.category_5_avg_rating,
  ps.category_6_score,
  ps.category_6_avg_rating,
  ps.category_7_score,
  ps.category_7_avg_rating,
  ps.category_8_score,
  ps.category_8_avg_rating,
  ps.category_9_score,
  ps.category_9_avg_rating,
  ps.category_10_score,
  ps.category_10_avg_rating,
  ps.total_data_count,
  ps.official_data_count,
  ps.public_data_count,
  ps.calculated_at,

  -- 3. ìƒì„¸ ë°ì´í„° (collected_data)
  cd.category_name,
  cd.item_num,
  cd.data_title,
  cd.data_content,
  cd.data_source,
  cd.source_type,
  cd.rating,
  cd.rating_rationale,
  cd.collection_date

FROM politicians p
LEFT JOIN politician_scores ps
  ON p.id = ps.politician_id
LEFT JOIN collected_data cd
  ON p.id = cd.politician_id

WHERE p.id = 1  -- ì˜¤ì„¸í›ˆ
ORDER BY cd.category_name, cd.rating DESC;
```

### ì¹´í…Œê³ ë¦¬ë³„ í†µê³„

```sql
-- ì¹´í…Œê³ ë¦¬ë³„ Rating ë¶„í¬
SELECT
  cd.category_name,
  COUNT(*) as total_count,
  AVG(cd.rating) as avg_rating,
  MIN(cd.rating) as min_rating,
  MAX(cd.rating) as max_rating,
  COUNT(CASE WHEN cd.rating >= 5 THEN 1 END) as positive_count,
  COUNT(CASE WHEN cd.rating BETWEEN -2 AND 2 THEN 1 END) as neutral_count,
  COUNT(CASE WHEN cd.rating <= -3 THEN 1 END) as negative_count,
  COUNT(CASE WHEN cd.source_type = 'OFFICIAL' THEN 1 END) as official_count,
  COUNT(CASE WHEN cd.source_type = 'PUBLIC' THEN 1 END) as public_count

FROM collected_data cd
WHERE cd.politician_id = 1
GROUP BY cd.category_name
ORDER BY cd.category_name;
```

### ê¸ì •/ë¶€ì • ë°ì´í„° ì¶”ì¶œ

```sql
-- ê¸ì • í‰ê°€ Top 10 (Rating +5 ì´ìƒ)
SELECT
  category_name,
  data_title,
  data_content,
  data_source,
  source_type,
  rating,
  rating_rationale
FROM collected_data
WHERE politician_id = 1 AND rating >= 5
ORDER BY rating DESC, category_name
LIMIT 10;

-- ë¶€ì • í‰ê°€ Top 10 (Rating -3 ì´í•˜)
SELECT
  category_name,
  data_title,
  data_content,
  data_source,
  source_type,
  rating,
  rating_rationale
FROM collected_data
WHERE politician_id = 1 AND rating <= -3
ORDER BY rating ASC, category_name
LIMIT 10;
```

---

## ğŸ Python ë³´ê³ ì„œ ìƒì„± ì½”ë“œ

### ê¸°ë³¸ êµ¬ì¡°

```python
# report_generator.py
import os
from supabase import create_client
from dotenv import load_dotenv
from datetime import datetime

load_dotenv()
supabase = create_client(os.getenv("SUPABASE_URL"), os.getenv("SUPABASE_SERVICE_ROLE_KEY"))

def generate_report(politician_id, politician_name):
    """ìƒì„¸í‰ê°€ë³´ê³ ì„œ ìƒì„±"""

    # 1. ê¸°ë³¸ ì •ë³´ ì¡°íšŒ
    politician = get_politician_info(politician_id)

    # 2. ì¢…í•© ì ìˆ˜ ì¡°íšŒ
    scores = get_politician_scores(politician_id)

    # 3. ìƒì„¸ ë°ì´í„° ì¡°íšŒ
    data = get_collected_data(politician_id)

    # 4. ë³´ê³ ì„œ ìƒì„±
    report = build_report(politician, scores, data)

    # 5. íŒŒì¼ ì €ì¥
    save_report(report, politician_name)

    return report

def get_politician_info(politician_id):
    """ì •ì¹˜ì¸ ê¸°ë³¸ ì •ë³´ ì¡°íšŒ"""
    result = supabase.table('politicians')\
        .select('*')\
        .eq('id', politician_id)\
        .execute()
    return result.data[0] if result.data else None

def get_politician_scores(politician_id):
    """ì •ì¹˜ì¸ ì ìˆ˜ ì¡°íšŒ"""
    result = supabase.table('politician_scores')\
        .select('*')\
        .eq('politician_id', politician_id)\
        .execute()
    return result.data[0] if result.data else None

def get_collected_data(politician_id):
    """ìˆ˜ì§‘ëœ í‰ê°€ ë°ì´í„° ì¡°íšŒ"""
    result = supabase.table('collected_data')\
        .select('*')\
        .eq('politician_id', politician_id)\
        .order('category_name', 'rating.desc')\
        .execute()
    return result.data

def build_report(politician, scores, data):
    """ë³´ê³ ì„œ ë§ˆí¬ë‹¤ìš´ ìƒì„±"""

    report = f"""# {politician['name']} ì¢…í•© í‰ê°€ ë³´ê³ ì„œ

**í‰ê°€ ë²„ì „**: V15.0
**í‰ê°€ ì¼ì**: {datetime.now().strftime('%Y-%m-%d')}
**ì´ ë°ì´í„° ìˆ˜**: {scores['total_data_count']}ê°œ

## ì¢…í•© ì ìˆ˜

- **ìµœì¢… ì ìˆ˜**: {scores['final_score']:.1f}ì  / 1,000ì 
- **ë“±ê¸‰**: {scores['grade']}
- **í‰ê°€**: {get_grade_description(scores['grade'])}

### ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜

| ì¹´í…Œê³ ë¦¬ | ì ìˆ˜ | í‰ê·  Rating | í‰ê°€ |
|---------|------|------------|------|
"""

    # ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜ ì¶”ê°€
    categories = [
        ('ì „ë¬¸ì„±', 'Expertise', 1),
        ('ë¦¬ë”ì‹­', 'Leadership', 2),
        ('ë¹„ì „', 'Vision', 3),
        ('ì²­ë ´ì„±', 'Integrity', 4),
        ('ìœ¤ë¦¬ì„±', 'Ethics', 5),
        ('ì±…ì„ì„±', 'Accountability', 6),
        ('íˆ¬ëª…ì„±', 'Transparency', 7),
        ('ì†Œí†µëŠ¥ë ¥', 'Communication', 8),
        ('ëŒ€ì‘ì„±', 'Responsiveness', 9),
        ('ê³µìµì„±', 'PublicInterest', 10)
    ]

    for kr_name, en_name, num in categories:
        score = scores[f'category_{num}_score']
        avg_rating = scores[f'category_{num}_avg_rating']
        report += f"| {num}. {kr_name} ({en_name}) | {score:.1f} | {avg_rating:+.1f} | {get_score_evaluation(score)} |\n"

    # ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ í‰ê°€ ì¶”ê°€
    for kr_name, en_name, num in categories:
        category_data = [d for d in data if d['category_name'] == en_name]
        report += build_category_section(kr_name, en_name, num, category_data, scores)

    # ì¶œì²˜ ë¶„ì„ ì¶”ê°€
    report += build_source_analysis(data, scores)

    return report

def get_grade_description(grade):
    """ë“±ê¸‰ ì„¤ëª…"""
    descriptions = {
        'I': 'ì—­ëŒ€ ìµœê³  ìˆ˜ì¤€ (Iridium)',
        'B': 'íƒì›”í•œ ë¦¬ë”ì‹­ (Bronze)',
        'S': 'ë§¤ìš° ìš°ìˆ˜í•œ ë¦¬ë”ì‹­ (Silver)',
        'G': 'ìš°ìˆ˜í•œ ë¦¬ë”ì‹­ (Gold)',
        'P': 'ì–‘í˜¸í•œ ë¦¬ë”ì‹­ (Platinum)',
        'E': 'ë³´í†µ ë¦¬ë”ì‹­ (Emerald)',
        'D': 'í‰ê·  ì´í•˜ (Diamond)',
        'M': 'ë¯¸í¡í•œ ë¦¬ë”ì‹­ (Mithril)'
    }
    return descriptions.get(grade, 'í‰ê°€ ì—†ìŒ')

def build_category_section(kr_name, en_name, num, category_data, scores):
    """ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ í‰ê°€ ì„¹ì…˜"""

    section = f"""

---

## ì¹´í…Œê³ ë¦¬ {num}: {kr_name} ({en_name})

**ì ìˆ˜**: {scores[f'category_{num}_score']:.1f}ì  / 110ì 
**í‰ê·  Rating**: {scores[f'category_{num}_avg_rating']:+.1f} / 10
**ìˆ˜ì§‘ ë°ì´í„°**: {len(category_data)}ê°œ

### ê¸ì • í‰ê°€ (Rating +5 ì´ìƒ)

"""

    # ê¸ì • í‰ê°€ ë°ì´í„°
    positive_data = [d for d in category_data if d['rating'] >= 5]
    for i, item in enumerate(positive_data[:10], 1):  # ìƒìœ„ 10ê°œ
        section += f"""
#### [{i}] {item['data_title']} (Rating: {item['rating']:+d})
- **ë‚´ìš©**: {item['data_content'][:200]}...
- **ì¶œì²˜**: {item['data_source']}
- **ì¶œì²˜ ìœ í˜•**: {item['source_type']}
- **Rating ê·¼ê±°**: {item['rating_rationale']}
"""

    # ë¶€ì • í‰ê°€ ë°ì´í„°
    negative_data = [d for d in category_data if d['rating'] <= -3]
    if negative_data:
        section += "\n### ë¶€ì • í‰ê°€ (Rating -3 ì´í•˜)\n"
        for i, item in enumerate(negative_data[:5], 1):  # ìƒìœ„ 5ê°œ
            section += f"""
#### [{i}] {item['data_title']} (Rating: {item['rating']:+d})
- **ë‚´ìš©**: {item['data_content'][:200]}...
- **ì¶œì²˜**: {item['data_source']}
- **ì¶œì²˜ ìœ í˜•**: {item['source_type']}
- **Rating ê·¼ê±°**: {item['rating_rationale']}
"""

    return section

def build_source_analysis(data, scores):
    """ì¶œì²˜ ë¶„ì„ ì„¹ì…˜"""

    section = f"""

---

## ë°ì´í„° ì¶œì²˜ ë¶„ì„

### ì¶œì²˜ ìœ í˜•ë³„ ë¶„í¬

| ì¶œì²˜ ìœ í˜• | ë°ì´í„° ìˆ˜ | ë¹„ìœ¨ | ê¸°ì¤€ |
|----------|---------|------|------|
| **OFFICIAL (ê³µì‹)** | {scores['official_data_count']}ê°œ | {scores['official_data_count']/scores['total_data_count']*100:.1f}% | {'âœ…' if scores['official_data_count']/scores['total_data_count'] >= 0.55 else 'âš ï¸'} |
| **PUBLIC (ê³µê°œ)** | {scores['public_data_count']}ê°œ | {scores['public_data_count']/scores['total_data_count']*100:.1f}% | {'âœ…' if scores['public_data_count']/scores['total_data_count'] >= 0.35 else 'âš ï¸'} |
| **í•©ê³„** | {scores['total_data_count']}ê°œ | 100% | - |

**ê¸°ì¤€**: OFFICIAL 60% + PUBLIC 40%
"""

    return section

def save_report(report, politician_name):
    """ë³´ê³ ì„œ íŒŒì¼ ì €ì¥"""
    filename = f"ìƒì„¸í‰ê°€ë³´ê³ ì„œ_{politician_name}_{datetime.now().strftime('%Y%m%d')}.md"
    filepath = f"ìƒì„¸í‰ê°€ë³´ê³ ì„œ/{filename}"

    os.makedirs("ìƒì„¸í‰ê°€ë³´ê³ ì„œ", exist_ok=True)

    with open(filepath, 'w', encoding='utf-8') as f:
        f.write(report)

    print(f"âœ… ë³´ê³ ì„œ ì €ì¥ ì™„ë£Œ: {filepath}")
    return filepath

# ì‹¤í–‰
if __name__ == "__main__":
    report = generate_report(1, "ì˜¤ì„¸í›ˆ")
    print(report)
```

---

## ğŸ“Š ë³´ê³ ì„œ ì¶œë ¥ í˜•ì‹

### ë§ˆí¬ë‹¤ìš´ (.md)
- ê¸°ë³¸ í˜•ì‹
- ë²„ì „ ê´€ë¦¬ ê°€ëŠ¥
- ì›¹ ë³€í™˜ ìš©ì´

### PDF (.pdf)
```python
import markdown
from weasyprint import HTML

def generate_pdf(markdown_content, output_path):
    """ë§ˆí¬ë‹¤ìš´ì„ PDFë¡œ ë³€í™˜"""
    html = markdown.markdown(markdown_content, extensions=['tables', 'fenced_code'])
    HTML(string=html).write_pdf(output_path)
```

### HTML (.html)
```python
def generate_html(markdown_content, output_path):
    """ë§ˆí¬ë‹¤ìš´ì„ HTMLë¡œ ë³€í™˜"""
    html = markdown.markdown(markdown_content, extensions=['tables', 'fenced_code'])

    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(f"""
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ìƒì„¸í‰ê°€ë³´ê³ ì„œ</title>
    <style>
        body {{ font-family: 'Noto Sans KR', sans-serif; }}
        table {{ border-collapse: collapse; width: 100%; }}
        th, td {{ border: 1px solid #ddd; padding: 8px; }}
    </style>
</head>
<body>
{html}
</body>
</html>
        """)
```

---

## âœ… ë³´ê³ ì„œ ìƒì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°ì´í„° ìˆ˜ì§‘ ë‹¨ê³„
- [ ] 500ê°œ ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ (ì¹´í…Œê³ ë¦¬ë³„ 50ê°œ)
- [ ] OFFICIAL 60% + PUBLIC 40% ë¹„ìœ¨ ì¶©ì¡±
- [ ] ëª¨ë“  ë°ì´í„°ì— source_type ì§€ì •
- [ ] Rating ë²”ìœ„ ì¤€ìˆ˜ (-6 ~ +10)

### ì ìˆ˜ ê³„ì‚° ë‹¨ê³„
- [ ] ì¹´í…Œê³ ë¦¬ë³„ í‰ê·  Rating ê³„ì‚°
- [ ] ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜ ê³„ì‚° (30~110ì )
- [ ] ìµœì¢… ì ìˆ˜ ê³„ì‚° ë° 1,000ì  ìƒí•œ ì ìš©
- [ ] ë“±ê¸‰ ë¶€ì—¬ (I/B/S/G/P/E/D/M)

### ë³´ê³ ì„œ ìƒì„± ë‹¨ê³„
- [ ] 3ê°œ í…Œì´ë¸” ë°ì´í„° ì¡°íšŒ (politicians, politician_scores, collected_data)
- [ ] ì¢…í•© ì ìˆ˜ ì„¹ì…˜ ì‘ì„±
- [ ] ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ í‰ê°€ ì„¹ì…˜ ì‘ì„± (10ê°œ)
- [ ] ì¶œì²˜ ë¶„ì„ ì„¹ì…˜ ì‘ì„±
- [ ] íŒŒì¼ ì €ì¥ (MD/PDF/HTML)

---

**ì‘ì„±ì**: Claude Code
**ìµœì¢… ìˆ˜ì •**: 2025-11-14
**ë²„ì „**: V15.0
**ìš©ë„**: ì •ì¹˜ì¸ AI í‰ê°€ ê²°ê³¼ ì¢…í•© ë³´ê³ ì„œ ìƒì„±
