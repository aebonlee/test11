# V18.0 자동화 아키텍처

**작성일**: 2025-11-15
**버전**: V18.0
**모델**: Claude Haiku 3.5 (claude-3-5-haiku-20241022)
**비용 절감**: 73% (Sonnet 4.5 대비)

## 📋 V18.0 주요 변경사항 (최신)

### V18.0: Minimum Guarantee Method (최소 보장 방법)
- **3단계 분리 수집**: 긍정 10개 보장 → 부정 10개 보장 → 자유 30개
- **AI 편향 방지**: Claude API의 긍정 편향(Positivity Bias) 보정
- **학술 근거**: arXiv, MIT, Brown University 2024 연구 기반

**V18.0 수집 구조**:
```
카테고리당 50개:
- 긍정 최소 보장: 10개 (20%)
- 부정 최소 보장: 10개 (20%)
- 자유 수집: 30개 (60%) ← 정치인 실제 모습 반영
```

### 등급 스케일
- **V14.0**: -8 ~ +8 (17단계, 대칭)
- **V15.0**: -6 ~ +10 (17단계, **비대칭**)
- **V18.0**: -8 ~ +8 (17단계, **대칭 복귀**, Prior 6.5)

**변경 이유**:
- Prior 6.5 + Coefficient 0.5 조합 최적화
- 자연스러운 분포 반영 (긍정 88%, 부정 11%)
- 등급 체계 단순화

### 점수 범위
- **이론적 범위**: 400 ~ 1,000점
- **실제 범위**: 400 ~ 1,000점

---

## 폴더 구조

```
0-3_AI_Evaluation_Engine/
├── src/
│   ├── main_orchestrator.py         # 메인 오케스트레이터 (V15.0)
│   ├── data_collector_parallel.py   # 병렬 데이터 수집기
│   └── score_calculator.py          # 점수 계산기 (V15.0, 1,000점 상한)
├── instructions/                     # 카테고리별 작업지시서 (10개)
│   ├── category_1_expertise.md
│   ├── category_2_leadership.md
│   ├── ... (카테고리 3~10)
│   └── README_V15.0_COMPLETE.md
└── 설계문서_V5.0/                    # V15.0 설계문서
    ├── README.md (이 파일)
    ├── V15.0_점수계산_알고리즘_FINAL.md
    ├── 등급체계_8단계_금속_300-1000점_V15.0.md
    └── Archive_Old_Versions/        # 구버전 문서 (V13.0, V14.0)
```

---

## 실행 방법

### 단일 정치인 평가

```bash
# 오세훈 평가
python src/main_orchestrator.py --politician_id=1 --politician_name="오세훈"

# 박주민 평가
python src/main_orchestrator.py --politician_id=2 --politician_name="박주민"
```

### Backend API 연동

```typescript
// Backend API 엔드포인트
POST /api/evaluate-politician
{
  "politician_id": 1,
  "politician_name": "오세훈"
}
```

---

## 작동 프로세스

1. 관리자 대시보드에서 "평가 시작" 버튼 클릭
2. Backend API 호출
3. `main_orchestrator.py` 실행
4. **10개 카테고리 병렬 데이터 수집** (Haiku, 5개씩 동시)
5. **V15.0 알고리즘으로 점수 계산** (1,000점 상한 적용)
6. DB 업데이트 (`evaluation_status`, `politicians.final_score`)
7. Frontend 실시간 진행 상황 표시

---

## V15.0 점수 계산 알고리즘

### 핵심 파라미터

```python
PRIOR = 6.0
COEFFICIENT = 0.5
RATING_RANGE = (-6, +10)  # 17단계
MAX_FINAL_SCORE = 1000     # 최종 점수 상한
```

### 점수 계산 공식

```python
# 1단계: 카테고리 점수 계산
category_score = (6.0 + avg_rating × 0.5) × 10

# 2단계: 최종 점수 계산
raw_final_score = sum(10개 카테고리 점수)

# 3단계: 1,000점 상한 적용 (V15.0 핵심)
final_score = min(raw_final_score, 1000)
```

### 점수 범위

| 항목 | 최소 | 최대 | 비고 |
|------|------|------|------|
| **카테고리 점수** | 30점 | 110점 | (6.0 + (-6)×0.5)×10 ~ (6.0 + 10×0.5)×10 |
| **이론적 최종 점수** | 300점 | 1,100점 | 30×10 ~ 110×10 |
| **실제 최종 점수** | 300점 | **1,000점** | **1,000점 상한 적용** |

---

## 등급 체계 (8단계 금속 등급)

| 등급 | 점수 범위 | 이모지 | 등급명 | 평가 |
|:----:|-----------|:------:|--------|------|
| **I** | **900~1000** | 💠 | Iridium | 역대 최고 수준 |
| **B** | **800~899** | 🥉 | Bronze | 탁월한 리더십 |
| **S** | **700~799** | 🥈 | Silver | 매우 우수한 리더십 |
| **G** | **600~699** | 🥇 | Gold | 우수한 리더십 |
| **P** | **500~599** | 🏆 | Platinum | 양호한 리더십 |
| **E** | **450~499** | 💚 | Emerald | 보통 리더십 |
| **D** | **425~449** | 💎 | Diamond | 평균 이하 |
| **M** | **400~424** | 🌺 | Mithril | 미흡한 리더십 |

---

## 데이터 수집 규칙 (V15.0)

### 수집 목표
- **카테고리당**: 50개 데이터
- **정치인당**: 500개 (10개 카테고리 × 50개)
- **재수집**: 50개 미달 시 최대 3회 시도

### 데이터 출처 비율 (필수)

**OFFICIAL (공식 데이터) 60%**:
- 정부/공공기관 발표
- 국회/지방의회 공식 기록
- 법원 판결문, 검찰 기소장
- 선관위 공식 자료
- 정부 통계/보고서

**PUBLIC (공개 데이터) 40%**:
- 언론 보도
- 시민단체 보고서
- 학술 논문
- SNS 공식 계정
- 공개 인터뷰/토론회

**검증**:
```
총 50개 수집 시:
- OFFICIAL: 30개 (60%)
- PUBLIC: 20개 (40%)
```

---

## 주요 파일

### Python 코드
- `src/main_orchestrator.py`: 전체 프로세스 오케스트레이션
- `src/data_collector_parallel.py`: 병렬 데이터 수집 (5개 카테고리씩)
- `src/score_calculator.py`: V15.0 점수 계산 (1,000점 상한)

### 작업지시서
- `instructions/category_1_expertise.md` ~ `category_10_publicinterest.md`
- 각 파일 ~410줄, 11KB
- V15.0 Rating 기준 (-6~+10) 반영
- 데이터 출처 비율 규칙 명시

### 설계문서
- `V15.0_점수계산_알고리즘_FINAL.md`: 점수 계산 알고리즘
- `등급체계_8단계_금속_300-1000점_V15.0.md`: 등급 체계
- `자동화_아키텍처_설계서.md`: 시스템 아키텍처
- `편향방지_최소보장_연구근거_V18.0.md`: **편향 방지 학술 근거 (신규)**
- `Bayesian_Prior_이론적_근거_V18.0.md`: **Bayesian Prior 6.5 이론 (신규)**

---

## 버전 히스토리

| 버전 | 날짜 | 주요 변경사항 |
|------|------|--------------|
| V13.0 | 2025-11-11 | Prior 6.5, Rating -7~+7, Haiku 도입 |
| V14.0 | 2025-11-13 | Prior 6.0, Rating -8~+8, 병렬 처리 |
| V15.0 | 2025-11-14 | Rating -6~+10 (비대칭), 1,000점 상한 |
| **V18.0** | **2025-11-15** | **Minimum Guarantee Method (긍정 20% + 부정 20% 보장)** |
| **V18.5** | **2025-11-15** | **Source Type 50/50 검증 로직 추가** |

---

## 참고 링크

### 핵심 이론
- [Bayesian Prior 이론적 근거 (V18.0)](./Bayesian_Prior_이론적_근거_V18.0.md) ⭐ **신규**
- [편향 방지 연구 근거 (V18.0)](./편향방지_최소보장_연구근거_V18.0.md) ⭐ **신규**

### 시스템 설계
- [V15.0 점수 계산 알고리즘](./V15.0_점수계산_알고리즘_FINAL.md)
- [등급 체계 V15.0](./등급체계_8단계_금속_300-1000점_V15.0.md) (Prior 6.0)
- [등급 체계 V18.0](./등급체계_8단계_금속_400-1000점_V18.0.md) ⭐ **신규 (Prior 6.5)**
- [자동화 아키텍처](./자동화_아키텍처_설계서.md)

### 업그레이드 가이드
- [V18.5 업그레이드 가이드](../V18.5_업그레이드_가이드.md)
- [작업지시서 README](../instructions/README_V15.0_COMPLETE.md)

---

**문서 작성**: Claude Code
**최종 수정**: 2025-11-15
**버전**: V18.0 / V18.5
**핵심 특징**:
- **V18.0**: Minimum Guarantee Method (긍정 20% + 부정 20% 보장)
- **V18.5**: Source Type 50/50 검증 강제
