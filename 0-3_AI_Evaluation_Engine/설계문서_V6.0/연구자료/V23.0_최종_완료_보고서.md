# V23.0 ìµœì¢… ì™„ë£Œ ë³´ê³ ì„œ

**ìž‘ì„±ì¼**: 2025-11-19
**ë²„ì „**: V23.0
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## ðŸ“‹ ìž‘ì—… ìš”ì•½

ì˜¤ëŠ˜ ì™„ë£Œí•œ ì£¼ìš” ìž‘ì—… 4ê°€ì§€:

1. âœ… **Instructions íŒŒì¼ì—ì„œ ì ìˆ˜ ì œê±°** (10ê°œ íŒŒì¼)
2. âœ… **ë°ì´í„° ìˆ˜ì§‘ ì •ì±… í™•ì •** (50ê°œ ëª©í‘œ, 45~60ê°œ í—ˆìš©)
3. âœ… **collect_v23_final.py ìž‘ì„±** (ìž¬ì‹œë„ 5ë²ˆ, source_type ë²„ê·¸ ìˆ˜ì •)
4. âœ… **DB ì œì•½ ì¡°ê±´ SQL ìž‘ì„±** (add_v23_constraints.sql)

---

## ðŸŽ¯ V23.0 ìµœì¢… ì •ì±…

### 1. ë°ì´í„° ìˆ˜ì§‘ ì •ì±…

| í•­ëª© | ê°’ | ì„¤ëª… |
|------|-----|------|
| **ëª©í‘œ ê°œìˆ˜** | 50ê°œ | ì¹´í…Œê³ ë¦¬ë‹¹ ì´ìƒì  ëª©í‘œ |
| **í—ˆìš© ë²”ìœ„** | 45~60ê°œ | ì‹¤ì œ ì €ìž¥ ê°€ëŠ¥ ë²”ìœ„ |
| **ìµœì†Œ ê°œìˆ˜** | 45ê°œ | 5ë²ˆ ìž¬ì‹œë„ í›„ ìµœì†Œ í—ˆìš© |
| **ìµœëŒ€ ê°œìˆ˜** | 60ê°œ | ìˆ˜ì§‘ ìƒí•œ (ì´ˆê³¼ ì‹œ 60ê°œë¡œ ì œí•œ) |
| **ìž¬ì‹œë„** | 5ë²ˆ | ìµœëŒ€ ì‹œë„ íšŸìˆ˜ |
| **OFFICIAL** | 50% ë¹„ìœ¨ | ê³µì‹ ì¶œì²˜ (ëŒ€ëžµ 25ê°œ) |
| **PUBLIC** | 50% ë¹„ìœ¨ | ê³µê°œ ì¶œì²˜ (ëŒ€ëžµ 25ê°œ) |
| **ë¶€ì • ì£¼ì œ** | 20% | 10ê°œ (OFFICIAL 5 + PUBLIC 5) |
| **ìžìœ  í‰ê°€** | 80% | 40ê°œ (OFFICIAL 20 + PUBLIC 20) |

### 2. ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤

```
Phase 1: ë¶€ì • ì£¼ì œ 10ê°œ
â”œâ”€ OFFICIAL: 5ê°œ (ê³µì‹ ê¸°ë¡ì—ì„œ ë…¼ëž€/ë¹„íŒ ìˆ˜ì§‘)
â””â”€ PUBLIC: 5ê°œ (ì–¸ë¡  ë³´ë„ì—ì„œ ë…¼ëž€/ë¹„íŒ ìˆ˜ì§‘)

Phase 2: ìžìœ  í‰ê°€ 40ê°œ
â”œâ”€ OFFICIAL: 20ê°œ (ê³µì‹ ê¸°ë¡ ìžìœ  í‰ê°€)
â””â”€ PUBLIC: 20ê°œ (ì–¸ë¡  ë³´ë„ ìžìœ  í‰ê°€)

ì´ ëª©í‘œ: 50ê°œ (OFFICIAL 25 + PUBLIC 25)
í—ˆìš© ë²”ìœ„: 45~60ê°œ
```

### 3. ìž¬ì‹œë„ ë¡œì§

```python
max_attempts = 5  # ìµœëŒ€ 5ë²ˆ ì‹œë„

# ì‹œë‚˜ë¦¬ì˜¤ 1: 3ë²ˆ ë§Œì— ì„±ê³µ
1ì°¨: 8ê°œ ìˆ˜ì§‘ (ëª©í‘œ ë¯¸ë‹¬)
2ì°¨: 1ê°œ ìˆ˜ì§‘ (ëª©í‘œ ë¯¸ë‹¬)
3ì°¨: 1ê°œ ìˆ˜ì§‘ (ë‹¬ì„±!) â†’ ì´ 10ê°œ

# ì‹œë‚˜ë¦¬ì˜¤ 2: 5ë²ˆ í›„ì—ë„ ë¯¸ë‹¬
1ì°¨~5ì°¨: ì´ 8ê°œë§Œ ìˆ˜ì§‘ (ë¯¸ë‹¬)
â†’ 8ê°œ ê·¸ëŒ€ë¡œ ì €ìž¥ (ê²½ê³  ì¶œë ¥)
```

### 4. ê°œìˆ˜ë³„ ì²˜ë¦¬

| ìˆ˜ì§‘ ê°œìˆ˜ | ì²˜ë¦¬ ë°©ë²• | ìƒíƒœ |
|-----------|----------|------|
| **60ê°œ ì´ˆê³¼** | 60ê°œë¡œ ì œí•œ | âœ… ìƒí•œ ë„ë‹¬ |
| **50~60ê°œ** | ê·¸ëŒ€ë¡œ ì €ìž¥ | âœ… ëª©í‘œ ë‹¬ì„± (ìš°ìˆ˜) |
| **45~49ê°œ** | ê·¸ëŒ€ë¡œ ì €ìž¥ | âš ï¸ ëª©í‘œ ë¯¸ë‹¬ (í—ˆìš©) |
| **45ê°œ ë¯¸ë§Œ** | ê·¸ëŒ€ë¡œ ì €ìž¥ | âŒ ì‹¬ê°í•œ ë¯¸ë‹¬ (ê²½ê³ ) |

**í•µì‹¬**: ìˆ˜ì§‘í•œ ë§Œí¼ ê·¸ëŒ€ë¡œ ì €ìž¥! (45~60ê°œ ë²”ìœ„ì—ì„œ ìœ ì—°í•˜ê²Œ)

---

## ðŸ”§ ì£¼ìš” ìˆ˜ì • ì‚¬í•­

### 1. Instructions íŒŒì¼ ì ìˆ˜ ì œê±°

**ë¬¸ì œì **:
- AIê°€ ì ìˆ˜(+8ì , +6ì  ë“±)ë¥¼ ë³´ê³  ì‹¬ë¦¬ì  ë¶€ë‹´ ëŠë‚Œ
- í‰ê°€ê°€ ì–´ë ¤ì›Œì§

**í•´ê²°ì±…**:
- ëª¨ë“  10ê°œ instruction íŒŒì¼ì—ì„œ ì ìˆ˜ í‘œì‹œ ì œê±°
- ë“±ê¸‰ë§Œ í‘œì‹œ (A, B, C, D, -D, -C, -B, -A)

**ë³€ê²½ ë‚´ìš©**:
```markdown
# ë³€ê²½ ì „
- **A**: +8ì  - ìµœê³  ìˆ˜ì¤€
- **B**: +6ì  - ë§¤ìš° ìš°ìˆ˜

# ë³€ê²½ í›„
- **A**: ìµœê³  ìˆ˜ì¤€
- **B**: ë§¤ìš° ìš°ìˆ˜
```

**íš¨ê³¼**:
- AIê°€ ë“±ê¸‰ë§Œ ì„ íƒ (ë¶€ë‹´ ê°ì†Œ)
- ì ìˆ˜ëŠ” ë°±ì—”ë“œì—ì„œ ìžë™ ê³„ì‚° (Prior 6.5 + Coefficient 0.5)

### 2. collect_v23_final.py ìž‘ì„±

**ì£¼ìš” ê°œì„ **:

#### (1) ìž¬ì‹œë„ 5ë²ˆìœ¼ë¡œ ì¦ê°€
```python
# ê¸°ì¡´: max_attempts = 3
# ê°œì„ : max_attempts = 5
```

#### (2) source_type ë²„ê·¸ ìˆ˜ì •
```python
# âŒ ê¸°ì¡´ (ë²„ê·¸)
'source_type': 'PUBLIC'  # í•­ìƒ PUBLICìœ¼ë¡œ ê³ ì •

# âœ… ìˆ˜ì •
'source_type': item['source_type']  # OFFICIAL ë˜ëŠ” PUBLIC
```

**ìž¬ê·€ í˜¸ì¶œ ë²„ê·¸ ìˆ˜ì •**:
```python
# âŒ ê¸°ì¡´ (source_type íŒŒë¼ë¯¸í„° ëˆ„ë½)
additional = collect_negative_topic_batch(politician_id, politician_name, category_num,
                                          count - len(valid_items), attempt + 1, max_attempts)

# âœ… ìˆ˜ì •
additional = collect_negative_topic_batch(
    politician_id, politician_name, category_num, source_type,  # â† source_type ì¶”ê°€!
    count - len(valid_items), attempt + 1, max_attempts
)
```

#### (3) 60ê°œ ìƒí•œ ì ìš©
```python
# 60ê°œ ì´ˆê³¼ ì‹œ ì œí•œ
if total > 60:
    print(f"\nâš ï¸  60ê°œ ì´ˆê³¼ ({total}ê°œ) â†’ 60ê°œë¡œ ì œí•œ")
    all_items = all_items[:60]
```

#### (4) ê°œìˆ˜ë³„ ìƒíƒœ ì¶œë ¥
```python
if total >= 50:
    print(f"\nâœ… ëª©í‘œ ë‹¬ì„±: {total}ê°œ")
elif total >= 45:
    print(f"\nâš ï¸  ëª©í‘œ ë¯¸ë‹¬ì´ì§€ë§Œ í—ˆìš© ë²”ìœ„: {total}ê°œ (45ê°œ ì´ìƒ)")
else:
    print(f"\nâŒ ì‹¬ê°í•œ ë¯¸ë‹¬: {total}ê°œ (45ê°œ ë¯¸ë§Œ)")
```

### 3. DB ì œì•½ ì¡°ê±´ ì¶”ê°€

**íŒŒì¼**: `add_v23_constraints.sql`

#### (1) item_num ë²”ìœ„ ì œì•½
```sql
ALTER TABLE collected_data
ADD CONSTRAINT check_item_num_range
CHECK (item_num >= 1 AND item_num <= 60);
```

#### (2) UNIQUE ì œì•½ (ì¤‘ë³µ ë°©ì§€)
```sql
ALTER TABLE collected_data
ADD CONSTRAINT unique_politician_category_item
UNIQUE (politician_id, category_name, item_num);
```

**íš¨ê³¼**:
- ê°™ì€ ì •ì¹˜ì¸, ê°™ì€ ì¹´í…Œê³ ë¦¬, ê°™ì€ item_num ì¤‘ë³µ ë¶ˆê°€
- ìž¬ìˆ˜ì§‘ ì‹œ ê¸°ì¡´ ë°ì´í„° ë³´í˜¸

#### (3) source_type NOT NULL
```sql
ALTER TABLE collected_data
ALTER COLUMN source_type SET NOT NULL;
```

**íš¨ê³¼**:
- source_type í•„ìˆ˜ ìž…ë ¥ (OFFICIAL ë˜ëŠ” PUBLIC)

#### (4) rating ë²”ìœ„ ì—…ë°ì´íŠ¸
```sql
ALTER TABLE collected_data
ADD CONSTRAINT collected_data_rating_check
CHECK (rating IN (-8, -6, -4, -2, 2, 4, 6, 8));
```

**íš¨ê³¼**:
- V23.0 8ë‹¨ê³„ ì•ŒíŒŒë²³ ë“±ê¸‰ë§Œ í—ˆìš©

---

## ðŸ“Š ì ìˆ˜ ë§¤í•‘ (ë°±ì—”ë“œ)

AIëŠ” ë“±ê¸‰ë§Œ ì„ íƒ, ì ìˆ˜ëŠ” ìžë™ ê³„ì‚°:

```python
# V23.0 ì•Œê³ ë¦¬ì¦˜
category_score = (6.5 + avg_rating Ã— 0.5) Ã— 10
```

| ë“±ê¸‰ | ìˆ«ìž | ê³„ì‚° | ì¹´í…Œê³ ë¦¬ ì ìˆ˜ |
|------|------|------|---------------|
| A | +8 | (6.5 + 8 Ã— 0.5) Ã— 10 | 105ì  |
| B | +6 | (6.5 + 6 Ã— 0.5) Ã— 10 | 95ì  |
| C | +4 | (6.5 + 4 Ã— 0.5) Ã— 10 | 85ì  |
| D | +2 | (6.5 + 2 Ã— 0.5) Ã— 10 | 75ì  |
| -D | -2 | (6.5 - 2 Ã— 0.5) Ã— 10 | 55ì  |
| -C | -4 | (6.5 - 4 Ã— 0.5) Ã— 10 | 45ì  |
| -B | -6 | (6.5 - 6 Ã— 0.5) Ã— 10 | 35ì  |
| -A | -8 | (6.5 - 8 Ã— 0.5) Ã— 10 | 25ì  |

**ìµœì¢… ì ìˆ˜**:
- ì¹´í…Œê³ ë¦¬ ì ìˆ˜ ë²”ìœ„: 25~105ì 
- ìµœì¢… ì ìˆ˜: 250~1,000ì  (10ê°œ ì¹´í…Œê³ ë¦¬ í•©ì‚°, 1000ì  ìƒí•œ)
- ë“±ê¸‰: I/B/S/G/P/E/D/M (8ë‹¨ê³„ ê¸ˆì†)

---

## ðŸš€ ì‚¬ìš© ë°©ë²•

### 1. DB ì œì•½ ì¡°ê±´ ì ìš©
```bash
psql -h your_host -U your_user -d your_db \
  -f ì„¤ê³„ë¬¸ì„œ_V6.0/Database/add_v23_constraints.sql
```

### 2. ë°ì´í„° ìˆ˜ì§‘ (1ê°œ ì¹´í…Œê³ ë¦¬ í…ŒìŠ¤íŠ¸)
```bash
python collect_v23_final.py \
  --politician_id=1 \
  --politician_name="ì˜¤ì„¸í›ˆ" \
  --category=1
```

### 3. ì „ì²´ ìˆ˜ì§‘ (10ê°œ ì¹´í…Œê³ ë¦¬)
```bash
python collect_v23_final.py \
  --politician_id=1 \
  --politician_name="ì˜¤ì„¸í›ˆ"
```

### 4. ìˆ˜ì§‘ í˜„í™© í™•ì¸
```sql
-- ì¹´í…Œê³ ë¦¬ë³„ í˜„í™©
SELECT * FROM v_collection_status WHERE politician_id = 1;

-- ì •ì¹˜ì¸ë³„ ì „ì²´ í˜„í™©
SELECT * FROM v_politician_collection_summary WHERE politician_id = 1;
```

---

## ðŸ“‚ ìƒì„±ëœ íŒŒì¼

### 1. ì½”ë“œ íŒŒì¼
```
collect_v23_final.py (ìƒˆë¡œ ìž‘ì„±)
â”œâ”€ ìž¬ì‹œë„: 5ë²ˆ
â”œâ”€ source_type: OFFICIAL/PUBLIC êµ¬ë¶„
â”œâ”€ 60ê°œ ìƒí•œ ì ìš©
â””â”€ ê°œìˆ˜ë³„ ìƒíƒœ ì¶œë ¥
```

### 2. SQL íŒŒì¼
```
ì„¤ê³„ë¬¸ì„œ_V6.0/Database/add_v23_constraints.sql (ìƒˆë¡œ ìž‘ì„±)
â”œâ”€ item_num ë²”ìœ„ ì œì•½ (1~60)
â”œâ”€ UNIQUE ì œì•½ (ì¤‘ë³µ ë°©ì§€)
â”œâ”€ source_type NOT NULL
â”œâ”€ rating ë²”ìœ„ ì—…ë°ì´íŠ¸
â””â”€ View 2ê°œ ìƒì„±
```

### 3. Instructions íŒŒì¼ (10ê°œ ìˆ˜ì •)
```
ì„¤ê³„ë¬¸ì„œ_V6.0/instructions/
â”œâ”€ category_1_expertise.md (ì ìˆ˜ ì œê±°)
â”œâ”€ category_2_leadership.md (ì ìˆ˜ ì œê±°)
â”œâ”€ ... (ì „ì²´ 10ê°œ)
â””â”€ category_10_publicinterest.md (ì ìˆ˜ ì œê±°)
```

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] Instructions íŒŒì¼ ì ìˆ˜ ì œê±° (10ê°œ)
- [x] ë°ì´í„° ìˆ˜ì§‘ ì •ì±… í™•ì • (50ê°œ ëª©í‘œ, 45~60ê°œ í—ˆìš©)
- [x] ìž¬ì‹œë„ 5ë²ˆìœ¼ë¡œ ì¦ê°€
- [x] source_type ë²„ê·¸ ìˆ˜ì • (OFFICIAL/PUBLIC êµ¬ë¶„)
- [x] 60ê°œ ìƒí•œ ì ìš©
- [x] DB ì œì•½ ì¡°ê±´ SQL ìž‘ì„±
- [x] item_num ë²”ìœ„ ì œì•½ (1~60)
- [x] UNIQUE ì œì•½ (ì¤‘ë³µ ë°©ì§€)
- [x] source_type NOT NULL ê°•ì œ
- [x] ìµœì¢… ë³´ê³ ì„œ ìž‘ì„±

---

## ðŸŽ¯ ë‹¤ìŒ ë‹¨ê³„

### 1. DB ì œì•½ ì¡°ê±´ ì ìš© (í•„ìˆ˜)
```bash
# Supabase SQL Editorì—ì„œ ì‹¤í–‰
add_v23_constraints.sql ë‚´ìš© ì‹¤í–‰
```

### 2. í…ŒìŠ¤íŠ¸ ìˆ˜ì§‘ (1ê°œ ì¹´í…Œê³ ë¦¬)
```bash
python collect_v23_final.py \
  --politician_id=1 \
  --politician_name="ì˜¤ì„¸í›ˆ" \
  --category=1
```

**í™•ì¸ ì‚¬í•­**:
- [ ] OFFICIAL 5ê°œ ìˆ˜ì§‘ë˜ëŠ”ê°€?
- [ ] PUBLIC 5ê°œ ìˆ˜ì§‘ë˜ëŠ”ê°€?
- [ ] source_typeì´ ì˜¬ë°”ë¥´ê²Œ ì €ìž¥ë˜ëŠ”ê°€?
- [ ] 45~60ê°œ ë²”ìœ„ ë‚´ ìˆ˜ì§‘ë˜ëŠ”ê°€?
- [ ] ì¤‘ë³µ ì—†ì´ ì €ìž¥ë˜ëŠ”ê°€?

### 3. ì „ì²´ ìˆ˜ì§‘ (10ê°œ ì¹´í…Œê³ ë¦¬)
í…ŒìŠ¤íŠ¸ ì„±ê³µ í›„ ì „ì²´ ìˆ˜ì§‘ ì§„í–‰

---

## ðŸ“ ì°¸ê³  ë¬¸ì„œ

### V23.0 í†µì¼ ì‚¬ì–‘
- **Prior**: 6.5
- **Coefficient**: 0.5
- **Rating**: A/B/C/D/-D/-C/-B/-A (8ë‹¨ê³„ ì•ŒíŒŒë²³)
- **ì ìˆ˜ ë²”ìœ„**: 250~1,000ì 
- **ë“±ê¸‰ ì²´ê³„**: I/B/S/G/P/E/D/M (ê¸ˆì† 8ë‹¨ê³„)
- **ë°ì´í„° ìˆ˜ì§‘**: ë¶€ì • ì£¼ì œ 20% ìµœì†Œ ë³´ìž¥
- **ì¶œì²˜ ë¹„ìœ¨**: OFFICIAL 50% + PUBLIC 50%

---

**ìž‘ì„± ì™„ë£Œ**: 2025-11-19
**ìµœì¢… ê²€í† **: Claude Code
**ìƒíƒœ**: âœ… ìš´ì˜ ì¤€ë¹„ ì™„ë£Œ
